/*! For license information please see app.bce3167b5d9e2b957963.js.LICENSE.txt */
(()=>{"use strict";var t,e={336:(t,e,n)=>{const r=function(){function t(){}return t.prototype.fetchPage=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=function(){return!0}),r=this,o=void 0,a=function(){var r,o,i,a;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(s){switch(s.label){case 0:if(r=t.getNorth().toFixed(2),o=t.getEast().toFixed(2),i=t.getSouth().toFixed(2),a=t.getWest().toFixed(2),!n())throw new Error("Proceed function returned false. Stopping fetch.");return e=Math.max(1,Number(e)),"https://api.lip.net.au/nbn-bulk/map/".concat(r,"/").concat(o,"/").concat(i,"/").concat(a,"?page=").concat(e),[4,new Promise((function(t,n){fetch("https://api.lip.net.au/nbn-bulk/map/".concat(r,"/").concat(o,"/").concat(i,"/").concat(a,"?page=").concat(e),{method:"GET",redirect:"follow"}).then((function(t){return t.text()})).then((function(e){var n=JSON.parse(e);t(n.data)})).catch(n)}))];case 1:return[2,s.sent()]}}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{l(a.next(t))}catch(t){e(t)}}function s(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,s)}l((a=a.apply(r,o||[])).next())}));var r,o,i,a},t}();var o=n(243),i=(n(732),n(256),function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}),a=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const s=function(){function t(t,e,n){this.points={},this.map=t,this.datastore=e,this.modeHandler=n,this.markers=new o.MarkerClusterGroup({maxClusterRadius:this.markerClusterRadius,spiderfyOnMaxZoom:!1,disableClusteringAtZoom:18,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,removeOutsideVisibleBounds:!0,iconCreateFunction:this.iconCreateFunction,chunkedLoading:!0,chunkInterval:150,chunkDelay:150,chunkProgress:function(t,e,n){console.log("chunkProgress",{processed:t,total:e,elapsed:n})}}),this.markers.addTo(this.map),this.map.on("zoomend",(function(t){console.log("zoomend",t.target.getZoom())}))}return t.prototype.iconCreateFunction=function(t){var e=t.getAllChildMarkers().map((function(t){return t.options.fillColor})),n={};e.forEach((function(t){n[t]||(n[t]=0),n[t]++}));var r=Object.keys(n).sort((function(t,e){return n[e]-n[t]})),i="background: conic-gradient(",a=0;r.forEach((function(t,r){0==r&&(i+="\n"+t+" 0%");var o=n[t]/e.length*100;i+=", \n"+t+" "+a+"%",i+=", \n"+t+" "+(a+o)+"%",a+=o})),i+="\n);";var s=Math.random().toString(36).substring(7);return o.divIcon({html:"<style>#cluster_".concat(s,"::before { ").concat(i," }</style> <div id='cluster_").concat(s,"'><span>")+t.getChildCount()+"</span></div>",className:"marker-cluster"})},t.prototype.markerClusterRadius=function(t){switch(t){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:return 150;case 14:return 100;default:return 0}},t.prototype.setModeHandler=function(t){return this.modeHandler=t,Object.values(this.points).forEach((function(e){var n=e.layer,r=e.point;n.setStyle({fillColor:t.pointColour(r)}),n.redraw()})),console.error(this.markers),this.markers&&this.markers.getLayers().length&&this.markers.refreshClusters(),this},t.prototype.refreshMarkersInsideBounds=function(t,e){var n,r,o;return i(this,void 0,void 0,(function(){var i,s,l=this;return a(this,(function(a){switch(a.label){case 0:if(!this.datastore)throw new Error("Datastore not set");return[4,this.datastore.getFullPointsWithinBounds(t)];case 1:return a.sent().forEach((function(t){var e=t.latlng;l.points[e]?l.points[e].point=t:l.points[e]={layer:l.renderPoint(t),point:t}})),e?(i=[],s=Object.values(this.points).filter((function(t){var n=t.layer,r=t.point.places.filter(e).length>0;return r||i.push(n),r})),i.length&&(null===(n=this.markers)||void 0===n||n.removeLayers(i)),null===(r=this.markers)||void 0===r||r.addLayers(s.map((function(t){return t.layer})))):null===(o=this.markers)||void 0===o||o.addLayers(Object.values(this.points).map((function(t){return t.layer}))),[2]}}))}))},t.prototype.removeMarkersOutsideBounds=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},t.prototype.removeAllMarkers=function(){var t;return i(this,void 0,void 0,(function(){return a(this,(function(e){return null===(t=this.markers)||void 0===t||t.clearLayers(),[2]}))}))},t.prototype.renderPoint=function(t){var e,n=this,r=o.circleMarker([t.latitude,t.longitude],{radius:5,fillColor:null===(e=this.modeHandler)||void 0===e?void 0:e.pointColour(t),color:"#000000",weight:1,opacity:1,fillOpacity:.8});return r.bindPopup((function(e){return n.renderPopup(t.places)||""}),{autoPan:!0,autoClose:!1}),r.bindTooltip((function(e){return n.modeHandler.renderTooltip(t.places)||""}),{}),r},t.prototype.renderPopup=function(t){return 1==t.length?this.modeHandler.renderPopupContent(t[0]):this.rendorPopupMulti(t)},t.prototype.rendorPopupMulti=function(t){var e,n,r=document.createElement("div"),o=[];t.sort((function(t,e){return t.address1<e.address1?-1:t.address1>e.address1?1:0}));var i=function(t){var e=document.createElement("div"),n=a.modeHandler.placeColour(t),i=document.createElement("button");i.classList.add("accordion"),i.type="button",i.innerHTML='<svg height="15" width="15" style="margin-right:3px">'+'<circle class="circle" cx="7.5" cy="9" r="5" stroke="#000" stroke-width="1" fill="'.concat(n,'" />')+"</svg>"+"<span>".concat(t.address1,"</span>");var s=document.createElement("div");s.classList.add("panel"),s.appendChild(a.modeHandler.renderPopupContent(t)),i.addEventListener("click",(function(){var t=e.classList.contains("active");o.forEach((function(t){t.classList.remove("active")})),t||e.classList.add("active")})),e.appendChild(i),e.appendChild(s),r.appendChild(e),o.push(e)},a=this;try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),l=s.next();!l.done;l=s.next())i(l.value)}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r},t}();function l(){return window.location.href.includes("localhost")||window.location.href.includes("debug=true")}var c=function(){return c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},c.apply(this,arguments)},u=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function h(t){var e=Math.ceil(50*t.getNorth())/50,n=Math.floor(25*t.getWest())/25,r=Math.floor(50*t.getSouth())/50,i=Math.ceil(25*t.getEast())/25;return o.latLngBounds([r,n],[e,i])}const p=function(){function t(e){var n=this;this.markerFilter=function(t){return!0},this.controls={},e=c(c({},t.DEFAULT_OPTIONS),e),this.api=e.api,this.datastore=e.datastore,this.modeHandler=e.defaultModeHandler,this.map=o.map(e.mapContainerId,{preferCanvas:!0}),this.markerLayer=new s(this.map,this.datastore,this.modeHandler),this.mapTileLayer=o.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",crossOrigin:!0,maxZoom:20}),this.mapTileLayer.addTo(this.map);var r=JSON.parse(localStorage.getItem("startpos")||"");r?this.map.setView([r.lat,r.lng],r.zoom):this.map.setView([-26.1772288,133.4170119],4),this.map.on("moveend",(function(){return u(n,void 0,void 0,(function(){var t,e;return d(this,(function(n){return t=this.map.getCenter(),e=this.map.getZoom(),localStorage.setItem("startpos",JSON.stringify({lat:t.lat,lng:t.lng,zoom:e})),this.fetchDataForCurrentView(),[2]}))}))})),this.fetchDataForCurrentView()}return t.prototype.getBoxesInBounds=function(t){for(var e=Math.ceil(50*t.getNorth())/50,n=Math.floor(25*t.getWest())/25,r=[],i=e;i>t.getSouth();i-=.02)for(var a=n;a<t.getEast();a+=.04)r.push([i,a]);return r.map((function(t){var e=t[0],n=t[1],r=e-.02,i=n+.04;return o.latLngBounds([r,n],[e,i])}))},t.prototype.getCurrentViewBoxes=function(){return this.getBoxesInBounds(this.map.getBounds())},t.prototype.hideMarkersOutsideCurrentView=function(){if(!this.markerLayer)throw new Error("Marker Layer not set");var t=this.map.getBounds().pad(.5);this.markerLayer.removeMarkersOutsideBounds(t)},t.prototype.displayMarkersInCurrentView=function(t){return void 0===t&&(t=1),u(this,void 0,void 0,(function(){var e,n=this;return d(this,(function(r){return!1===this.datastore.isReady()?t>10?(console.error("Could not get datastore ready. Giving up."),[2]):(console.warn("Datastore is not ready. Delaying displayMarkersInCurrentView()"),setTimeout((function(){return n.displayMarkersInCurrentView(t+1)}),1e3),[2]):(console.log("Displaying markers in current view"),e=h(this.map.getBounds()),console.log("Fetching from Datastore",e),this.refreshPointsFromStore(e),[2])}))}))},t.prototype.fetchDataForCurrentView=function(){return u(this,void 0,void 0,(function(){var t,e,n=this;return d(this,(function(r){switch(r.label){case 0:return this.hideMarkersOutsideCurrentView(),this.displayMarkersInCurrentView(),t=this.getCurrentViewBoxes(),l()&&console.log("Current view boxes",t),t.length>1e3?(console.warn("Too many boxes to fetch. Skipping."),[2]):(l()&&console.log("Fetching boxes"),e=t.map((function(t){return n.fetchData(t)})),l()&&console.log("Waiting for boxes to be fetched"),[4,Promise.all(e)]);case 1:return r.sent(),l()&&console.log("All boxes fetched"),[4,this.refreshPointsFromStore(this.map.getBounds().pad(.5))];case 2:return r.sent(),[2]}}))}))},t.prototype.fetchData=function(t,e){return void 0===e&&(e=1),u(this,void 0,void 0,(function(){var n,r,o=this;return d(this,(function(i){switch(i.label){case 0:l()&&console.log("Fetching Box",t.getCenter().toString(),e),i.label=1;case 1:return i.trys.push([1,6,,7]),[4,this.api.fetchPage(t,e,(function(){return o.map.getBounds().intersects(t)}))];case 2:return n=i.sent(),[4,this.processFetchResult(n,t)];case 3:return i.sent(),n.next?[4,this.fetchData(t,n.next)]:[3,5];case 4:return[2,i.sent()];case 5:return[2];case 6:return"Page already loaded this session."==(r=i.sent()).message?[2]:(console.error(r),[3,7]);case 7:return[2]}}))}))},t.prototype.processFetchResult=function(t,e){return u(this,void 0,void 0,(function(){var e;return d(this,(function(n){switch(n.label){case 0:return console.log("Storing places."),e=this.datastore.storePlaces(t.places),console.log("Waiting for place storing to finish"),[4,e];case 1:return n.sent(),[2]}}))}))},t.prototype.refreshPointsFromStore=function(t){return u(this,void 0,void 0,(function(){return d(this,(function(e){if(!this.markerLayer)throw new Error("Marker Layer not set");return t||(console.log("Bounds not passed. Using map bounds."),t=this.map.getBounds()),t=h(t),this.markerLayer.refreshMarkersInsideBounds(t,this.markerFilter),[2]}))}))},t.prototype.addControl=function(t,e){if(this.controls[t])throw new Error("Control with key ".concat(t," already exists"));this.controls[t]=e,this.map.addControl(e.getControl()),console.log("Added control",t)},t.prototype.setMarkerFilter=function(t){if(!this.markerLayer)throw new Error("Marker Layer not set");this.markerFilter=t,this.markerLayer.refreshMarkersInsideBounds(this.map.getBounds(),this.markerFilter)},t.prototype.setModeHandler=function(t){var e;this.modeHandler=t,null===(e=this.markerLayer)||void 0===e||e.setModeHandler(t)},t.DEFAULT_OPTIONS={mapContainerId:"map"},t}(),f=function(){function t(){this.eventHandlers={},this.control=new o.Control}return t.prototype.on=function(t,e){this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)},t.prototype.emit=function(t,e){var n=this;console.debug("Emitting event: ".concat(t),{data:e,handlers:this.eventHandlers[t]}),this.eventHandlers[t]&&this.eventHandlers[t].forEach((function(r){return r({name:t,state:n.getState(),data:e})}))},t.prototype.getControl=function(){return this.control},t}();var v,y=(v=function(t,e){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},v(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const g=function(t){function e(){var e=t.call(this)||this;return e.displayMode="all",e.elControlDiv=document.createElement("div"),e.elDropdown=document.createElement("select"),e.allLabel=null,e.allRadio=null,e.allText=null,e.upgradeLabel=null,e.upgradeRadio=null,e.upgradeText=null,e.eeLabel=null,e.eeRadio=null,e.eeText=null,e.generateControlDiv(),e.control.onAdd=function(t){return e.generateDropdown(),e.elControlDiv},e}return y(e,t),e.prototype.getState=function(){return this.displayMode},e.prototype.changeMode=function(t){this.displayMode=t,this.emit("change",t)},e.prototype.generateControlDiv=function(){this.elControlDiv&&console.warn("ControlDiv already exists"),this.elControlDiv.classList.add("info","legend"),this.elControlDiv.style.backgroundColor="#ffffff",this.elControlDiv.style.opacity="0.8",this.elControlDiv.style.padding="5px",this.elControlDiv.style.borderRadius="5px"},e.prototype.generateDropdown=function(){var t=this;this.elDropdown&&console.warn("Dropdown already exists");var e=this.elDropdown;e.classList.add("control-select");var n=document.createElement("option");n.value="all",n.innerText="Show All Locations",e.appendChild(n),e.addEventListener("change",(function(e){return t.changeMode(e.target.value)})),this.elDropdown=e,this.elControlDiv.appendChild(e)},e}(f);var m=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},b=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},C=function(){function t(){this.latLngIndex={},this.nbnPlaceStore={}}return t.prototype.isReady=function(){return!0},t.prototype.storePlace=function(t){return m(this,void 0,void 0,(function(){var e,n,r,o;return b(this,(function(i){return e=t.latitude,n=t.longitude,r="".concat(e,",").concat(n),o=t.locid,this.latLngIndex[r]?this.latLngIndex[r].includes(o)||this.latLngIndex[r].push(o):this.latLngIndex[r]=[o],this.nbnPlaceStore[o]=t,[2]}))}))},t.prototype.storePlaces=function(t){return m(this,void 0,void 0,(function(){var e=this;return b(this,(function(n){return t.forEach((function(t){return e.storePlace(t)})),[2]}))}))},t.prototype.getPlace=function(t){return m(this,void 0,void 0,(function(){return b(this,(function(e){return[2,this.nbnPlaceStore[t]]}))}))},t.prototype.getPlaces=function(){return m(this,void 0,void 0,(function(){var t=this;return b(this,(function(e){return[2,Object.keys(this.nbnPlaceStore).map((function(e){return t.nbnPlaceStore[e]}))]}))}))},t.prototype.getPoints=function(){return m(this,void 0,void 0,(function(){var t=this;return b(this,(function(e){return[2,Object.keys(this.latLngIndex).map((function(e){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e.split(",").map(Number),2);return{latlng:e,latitude:n[0],longitude:n[1],locids:t.latLngIndex[e]}}))]}))}))},t.prototype.getPointsWithinBounds=function(t){return m(this,void 0,void 0,(function(){var e=this;return b(this,(function(n){switch(n.label){case 0:return[4,this.getPoints()];case 1:return[2,n.sent().filter((function(n){var r=n.latitude,o=n.longitude;return e.isLatLngWithinBounds(r,o,t)}))]}}))}))},t.prototype.getFullPointsWithinBounds=function(t){return m(this,void 0,void 0,(function(){var e,n=this;return b(this,(function(r){switch(r.label){case 0:return[4,this.getPoints()];case 1:return e=r.sent().filter((function(e){var r=e.latitude,o=e.longitude;return n.isLatLngWithinBounds(r,o,t)})).map((function(t){return{latlng:t.latlng,latitude:t.latitude,longitude:t.longitude,places:t.locids.map((function(t){return n.nbnPlaceStore[t]}))}})),[2,e]}}))}))},t.prototype.getPlacesAtLatLng=function(t,e){return m(this,void 0,void 0,(function(){var n,r=this;return b(this,(function(o){return n="".concat(t,",").concat(e),[2,this.latLngIndex[n].map((function(t){return r.nbnPlaceStore[t]}))]}))}))},t.prototype.isLatLngWithinBounds=function(t,e,n){return t>n.getSouth()&&t<n.getNorth()&&e>n.getWest()&&e<n.getEast()},t}(),w="#1D7044",T="#75AD6F",k="#C8E3C5",L="#FFBE00",x="#FF7E01",P="#E3071D",S="#02B9E3",F="#022BE3",E="#6B02E3",M="#888888";function O(t){switch(t){case"FTTP":return w;case"FTTC":return x;case"FTTN":case"FTTB":return P;case"HFC":return L;case"WIRELESS":return S;case"SATELLITE":return E}return M}const D=function(){function t(){}return t.prototype.filter=function(t){return!0},t.prototype.pointColour=function(t){return this.placeColour(t.places[0])},t.prototype.placeColour=function(t){return function(t){return"FTTP"===t.techType}(t)?w:function(t){return!(!t.altReasonCode||!t.altReasonCode.match(/^FTTP/)||"Eligible To Order"!==t.techChangeStatus)}(t)?T:function(t){if(t.altReasonCode&&t.altReasonCode.match(/^FTTP/))switch(t.techChangeStatus){case"In Design":case"Build Finalised":case"Planned":case"MDU Complex Eligible To Apply":case"MDU Complex Premises In Build":return!0}return!1}(t)?k:function(t){if(t.altReasonCode&&t.altReasonCode.match(/^FTTP/)&&"Committed"===t.techChangeStatus)return!0}(t)?O(t.techType):function(t){return!("FTTC"!=t.techType||!t.reasonCode||!t.reasonCode.match(/^FTTC/)||"New Tech Connected"!=t.techChangeStatus)}(t)?x:function(t){return"FTTC"==t.techType&&"FTTC_SA"==t.reasonCode&&"FW_CT"==t.altReasonCode&&"Eligible To Order"==t.techChangeStatus}(t)?"#FF7E01":function(t){return"FTTN"==t.techType&&"FTTN_SA"==t.reasonCode&&"FW_CT"==t.altReasonCode&&"Eligible To Order"==t.techChangeStatus}(t)?P:function(t){return"WIRELESS"==t.techType&&"FW_SA"==t.reasonCode&&"Eligible To Order"==t.techChangeStatus}(t)?F:(t.altReasonCode&&"NULL_NA"!=t.altReasonCode&&console.log(t),O(t.techType))},t.prototype.renderPopupContent=function(t){var e=o.DomUtil.create("div");if(e.innerHTML="<b>"+t.locid+"</b></br>"+t.address1+"</br>"+t.address2+"</br><br />",e.innerHTML+="<b>Technology Plan</b></br>","FTTP"!=t.techType&&t.altReasonCode&&"NULL_NA"!=t.altReasonCode?(t.altReasonCode&&t.altReasonCode.match(/^FTTP/),e.innerHTML+="Current: "+t.techType+"<br />",e.innerHTML+="Change: "+t.altReasonCode+"<br />",e.innerHTML+="Status: "+t.techChangeStatus+"<br />",e.innerHTML+="Program: "+t.programType+"<br />",e.innerHTML+="Target Qtr: "+t.targetEligibilityQuarter+"<br />"):(e.innerHTML+="Technology: "+t.techType+"<br />","FTTP"!=t.techType&&(e.innerHTML+="No tech upgrade planned<br />")),e.innerHTML+="<br />",t.ee&&(e.innerHTML+="<b>Enterprise Ethernet</b></br>",e.innerHTML+="Price Zone: "+(t.cbdpricing?"CBD":"Zone 1/2/3")+"<br />",e.innerHTML+="Build Cost: "+(t.zeroBuildCost?"$0":"POA")+"<br />",e.innerHTML+="<br />"),l()){var n=o.DomUtil.create("hr"),r=o.DomUtil.create("pre");r.innerHTML=JSON.stringify(t,null,2),e.appendChild(n),e.appendChild(r)}return e},t.prototype.renderTooltip=function(t){var e=t[0].address1;return t.length>1&&(e+=" ( + "+(t.length-1)+" more)"),e},t.prototype.getLegendItems=function(){return[{label:"FTTP",colour:w},{label:"FTTP Upgrade",colour:T},{label:"FTTP Upgrade Soon",colour:k},{label:"HFC",colour:L},{label:"FTTC",colour:x},{label:"FTTN/FTTB",colour:P},{label:"FW",colour:S},{label:"FW Upgrade",colour:F},{label:"Satellite",colour:E},{label:"Unknown",colour:M}]},t}();var H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const B=function(t){function e(){var e=t.call(this)||this;return e.elControlDiv=document.createElement("div"),e.control.setPosition("bottomright"),e.elControlDiv.classList.add("info","legend"),e.elControlDiv.style.backgroundColor="#ffffff",e.elControlDiv.style.opacity="0.8",e.elControlDiv.style.padding="5px",e.elControlDiv.style.borderRadius="5px",e.control.onAdd=function(t){return e.elControlDiv},e}return H(e,t),e.prototype.getState=function(){},e.prototype.updateLegend=function(t){var e="";t.forEach((function(t){e+='<svg height="10" width="10"><circle cx="5" cy="5" r="5" fill="'+t.colour+'" stroke="#000000" stroke-width="1" opacity="1" fill-opacity="0.8" /></svg> '+t.label,t.count&&(e+=" ("+t.count+")"),e+="<br>"})),this.elControlDiv.innerHTML=e},e}(f);var I;I=function(){var t=new r,e=new C,n=new D,o=new p({mapContainerId:"map",api:t,datastore:e,defaultModeHandler:n}),i=new g;o.addControl("displaymode",i);var a=new B;a.updateLegend(n.getLegendItems()),o.addControl("legend",a),i.on("change",(function(t){"all"===t.state&&o.setModeHandler(n)}))},"complete"===document.readyState||"interactive"===document.readyState?setTimeout(I,1):document.addEventListener("DOMContentLoaded",I)}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<t.length;u++){for(var[n,o,i]=t[u],s=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((t=>r.O[t](n[l])))?n.splice(l--,1):(s=!1,i<a&&(a=i));if(s){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,o,i]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={143:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[a,s,l]=n,c=0;if(a.some((e=>0!==t[e]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)var u=l(r)}for(e&&e(n);c<a.length;c++)i=a[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[657],(()=>r(336)));o=r.O(o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovLy8uL3NyYy9hcGkvbGlwX2FwaS5jbGFzcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2xhc3Nlcy9tYXJrZXJsYXllci5jbHVzdGVyLmNsYXNzLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmJuX3RlY2hfbWFwLmNsYXNzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9scy9jb250cm9sLmFic3RyYWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9scy9jb250cm9sX2Rpc3BsYXlfbW9kZS5jbGFzcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXN0b3JlL2RhdGFzdG9yZS5tZW1vcnkuY2xhc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVzL21vZGUuYWxsLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9scy9jb250cm9sX2xlZ2VuZC5jbGFzcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL25vbmNlIiwid2VicGFjazovLy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiaW1wb3J0IElBcGkgZnJvbSBcIi4uL2ludGVyZmFjZXMvYXBpLmludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBOYm5QbGFjZUFwaVJlc3BvbnNlIH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7IGlzRGVidWdNb2RlIH0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXBBcGkgaW1wbGVtZW50cyBJQXBpIHtcclxuXHJcbiAgICBhc3luYyBmZXRjaFBhZ2UoXHJcbiAgICAgICAgYm91bmRzOiBMLkxhdExuZ0JvdW5kcyxcclxuICAgICAgICBwYWdlOiBudW1iZXIgPSAxLFxyXG4gICAgICAgIHByb2NlZWQ6ICgpID0+IGJvb2xlYW4gPSAoKSA9PiB0cnVlLFxyXG4gICAgKSA6IFByb21pc2U8TmJuUGxhY2VBcGlSZXNwb25zZT5cclxuICAgIHtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9ydGggPSBib3VuZHMuZ2V0Tm9ydGgoKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIGNvbnN0IGVhc3QgPSBib3VuZHMuZ2V0RWFzdCgpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgY29uc3Qgc291dGggPSBib3VuZHMuZ2V0U291dGgoKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIGNvbnN0IHdlc3QgPSBib3VuZHMuZ2V0V2VzdCgpLnRvRml4ZWQoMik7XHJcblxyXG4gICAgICAgIGlmICghcHJvY2VlZCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvY2VlZCBmdW5jdGlvbiByZXR1cm5lZCBmYWxzZS4gU3RvcHBpbmcgZmV0Y2guJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHBhZ2UgPSBNYXRoLm1heCgxLCBOdW1iZXIocGFnZSkpO1xyXG5cclxuICAgICAgICBjb25zdCBwYWdlVXJsID0gYGh0dHBzOi8vYXBpLmxpcC5uZXQuYXUvbmJuLWJ1bGsvbWFwLyR7bm9ydGh9LyR7ZWFzdH0vJHtzb3V0aH0vJHt3ZXN0fT9wYWdlPSR7cGFnZX1gO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBwYWdlIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIHRoaXMgc2Vzc2lvbi5cclxuICAgICAgICAvL2NvbnN0IGNhY2hlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShwYWdlVXJsKTtcclxuICAgICAgICAvL2NvbnN0IGNhY2hlZFRpbWUgPSBjYWNoZSA/IG5ldyBEYXRlKGNhY2hlKSA6IG51bGw7XHJcbiAgICAgICAgLy9pZiAoY2FjaGVkVGltZSAmJiBjYWNoZWRUaW1lLmdldFRpbWUoKSA+IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gMTAwMCAqIDYwICogNjAgKiAyNCkge1xyXG4gICAgICAgIC8vICAgIHRocm93IG5ldyBFcnJvcignUGFnZSBhbHJlYWR5IGxvYWRlZCB0aGlzIHNlc3Npb24uJyk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGZldGNoKGBodHRwczovL2FwaS5saXAubmV0LmF1L25ibi1idWxrL21hcC8ke25vcnRofS8ke2Vhc3R9LyR7c291dGh9LyR7d2VzdH0/cGFnZT0ke3BhZ2V9YCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxyXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmVzdWx0ID0gSlNPTi5wYXJzZShyZXN1bHQpIGFzIHsgZGF0YTogTmJuUGxhY2VBcGlSZXNwb25zZX07XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHBhcnNlZFJlc3VsdC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIC8vc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShwYWdlVXJsLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgSURhdGFzdG9yZSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9kYXRhc3RvcmUuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCBJTWFya2VyTGF5ZXIgZnJvbSBcIi4uL2ludGVyZmFjZXMvbWFya2VybGF5ZXIuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCAnbGVhZmxldC5tYXJrZXJjbHVzdGVyJztcclxuaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9NYXJrZXJDbHVzdGVyLmNzcyc7XHJcbi8vaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9NYXJrZXJDbHVzdGVyLkRlZmF1bHQuY3NzJztcclxuXHJcbmltcG9ydCAqIGFzIEwgZnJvbSBcImxlYWZsZXRcIjtcclxuaW1wb3J0IHsgTmJuUGxhY2UsIFBvaW50QW5kTG9jaWRzLCBQb2ludEFuZFBsYWNlcyB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5cclxuLy8gQ29uc3RhbnQgQ29sb3Vyc1xyXG5jb25zdCBjb2xvdXJGVFRQIFx0XHQ9ICcjMUQ3MDQ0JztcclxuY29uc3QgY29sb3VyRlRUUEF2YWlsICAgPSAnIzc1QUQ2Ric7XHJcbmNvbnN0IGNvbG91ckZUVFBTb29uICAgID0gJyNDOEUzQzUnO1xyXG5jb25zdCBjb2xvdXJIRkMgXHRcdD0gJyNGRkJFMDAnO1xyXG5jb25zdCBjb2xvdXJGVFRDIFx0XHQ9ICcjRkY3RTAxJztcclxuY29uc3QgY29sb3VyRlRUQ0F2YWlsICAgPSAnI0ZGN0UwMSc7XHJcbmNvbnN0IGNvbG91ckZUVE5CIFx0XHQ9ICcjRTMwNzFEJztcclxuY29uc3QgY29sb3VyRlcgXHRcdCAgICA9ICcjMDJCOUUzJztcclxuY29uc3QgY29sb3VyRldBdmFpbCBcdD0gJyMwMjJCRTMnO1xyXG5jb25zdCBjb2xvdXJTYXQgXHQgICAgPSAnIzZCMDJFMyc7XHJcblxyXG5jb25zdCBjb2xvdXJFRV9DQkRfWkJDICA9ICcjMUQ3MDQ0JztcclxuY29uc3QgY29sb3VyRUVfQ0JEX0JDICAgPSAnIzAyQjlFMyc7XHJcbmNvbnN0IGNvbG91ckVFX1oxMjNfWkJDID0gJyNGRjdFMDEnO1xyXG5jb25zdCBjb2xvdXJFRV9aMTIzX0JDICA9ICcjRTMwNzFEJztcclxuXHJcbmNvbnN0IENPTF9URUNIX0NPTVBMRVRFICAgICAgICAgPSAnIzFENzA0NCc7XHJcbmNvbnN0IENPTF9URUNIX0FWQUlMICAgICAgICAgICAgPSAnIzAyQjlFMyc7XHJcbmNvbnN0IENPTF9URUNIX0JVSUxERklOQUxJU0VEICAgPSAnI0ZGQkUwMCc7XHJcbmNvbnN0IENPTF9URUNIX0RFU0lHTiAgICAgICAgICAgPSAnI0ZGN0UwMSc7XHJcbmNvbnN0IENPTF9URUNIX0NPTU1JVFRFRCAgICAgICAgPSAnI0UzMDcxRCc7XHJcblxyXG5jb25zdCBDT0xfVEVDSF9NRFVfSU5CVUlMRCAgICAgID0gJyMwMjJCRTMnO1xyXG5jb25zdCBDT0xfVEVDSF9NRFVfRUxJR0lCTEUgICAgID0gJyM2QjAyRTMnO1xyXG5cclxuY29uc3QgY29sb3VyVW5rbm93biAgICAgID0gJyM4ODg4ODgnO1xyXG5cclxuaW1wb3J0IElNb2RlIGZyb20gXCIuLi9pbnRlcmZhY2VzL21vZGUuaW50ZXJmYWNlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZXJMYXllckNsdXN0ZXIgaW1wbGVtZW50cyBJTWFya2VyTGF5ZXIge1xyXG5cclxuICAgIHByaXZhdGUgbWFwOiBMLk1hcDtcclxuICAgIHByaXZhdGUgZGF0YXN0b3JlOiBJRGF0YXN0b3JlO1xyXG4gICAgcHJpdmF0ZSBtb2RlSGFuZGxlcjogSU1vZGU7XHJcblxyXG4gICAgcHJpdmF0ZSBtYXJrZXJzOiBMLk1hcmtlckNsdXN0ZXJHcm91cDtcclxuXHJcbiAgICBwcml2YXRlIHBvaW50czoge1xyXG4gICAgICAgIFtsYXRMbmdTdHJpbmc6IHN0cmluZ106IHtcclxuICAgICAgICAgICAgbGF5ZXI6IEwuQ2lyY2xlTWFya2VyLFxyXG4gICAgICAgICAgICBwb2ludDogUG9pbnRBbmRQbGFjZXMsXHJcbiAgICAgICAgfVxyXG4gICAgfSA9IHt9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1hcDogTC5NYXAsIGRhdGFzdG9yZTogSURhdGFzdG9yZSwgbW9kZUhhbmRsZXI6IElNb2RlKSB7XHJcblxyXG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xyXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZGF0YXN0b3JlO1xyXG4gICAgICAgIHRoaXMubW9kZUhhbmRsZXIgPSBtb2RlSGFuZGxlcjtcclxuXHJcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuTWFya2VyQ2x1c3Rlckdyb3VwKHtcclxuICAgICAgICAgICAgbWF4Q2x1c3RlclJhZGl1czogdGhpcy5tYXJrZXJDbHVzdGVyUmFkaXVzLFxyXG4gICAgICAgICAgICBzcGlkZXJmeU9uTWF4Wm9vbTogZmFsc2UsXHJcbiAgICAgICAgICAgIGRpc2FibGVDbHVzdGVyaW5nQXRab29tOiAxOCxcclxuICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogdHJ1ZSxcclxuICAgICAgICAgICAgem9vbVRvQm91bmRzT25DbGljazogdHJ1ZSxcclxuICAgICAgICAgICAgcmVtb3ZlT3V0c2lkZVZpc2libGVCb3VuZHM6IHRydWUsXHJcbiAgICAgICAgICAgIGljb25DcmVhdGVGdW5jdGlvbjogdGhpcy5pY29uQ3JlYXRlRnVuY3Rpb24sXHJcbiAgICAgICAgICAgIGNodW5rZWRMb2FkaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICBjaHVua0ludGVydmFsOiAxNTAsXHJcbiAgICAgICAgICAgIGNodW5rRGVsYXk6IDE1MCxcclxuICAgICAgICAgICAgY2h1bmtQcm9ncmVzczogKHByb2Nlc3NlZCwgdG90YWwsIGVsYXBzZWQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaHVua1Byb2dyZXNzJywgeyBwcm9jZXNzZWQsIHRvdGFsLCBlbGFwc2VkIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm1hcmtlcnMuYWRkVG8odGhpcy5tYXApO1xyXG5cclxuICAgICAgICB0aGlzLm1hcC5vbignem9vbWVuZCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnem9vbWVuZCcsIGV2ZW50LnRhcmdldC5nZXRab29tKCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBpY29uQ3JlYXRlRnVuY3Rpb24oY2x1c3RlcjogTC5NYXJrZXJDbHVzdGVyKSA6IEwuRGl2SWNvblxyXG4gICAge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbG9yQXJyYXkgPSBjbHVzdGVyLmdldEFsbENoaWxkTWFya2VycygpLm1hcCgobWFya2VyKSA9PiAobWFya2VyIGFzIGFueSkub3B0aW9ucy5maWxsQ29sb3IpXHJcblxyXG4gICAgICAgIGNvbnN0IGNvbG9yQ291bnRzOiB7W2NvbG9yOiBzdHJpbmddOiBudW1iZXJ9ID0ge307XHJcblxyXG4gICAgICAgIGNvbG9yQXJyYXkuZm9yRWFjaCgoY29sb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjb2xvckNvdW50c1tjb2xvcl0pIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yQ291bnRzW2NvbG9yXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JDb3VudHNbY29sb3JdKys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbG9yQXJyYXlTb3J0ZWQgPSBPYmplY3Qua2V5cyhjb2xvckNvdW50cylcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGNvbG9yQ291bnRzW2JdIC0gY29sb3JDb3VudHNbYV0pXHJcbiAgICAgICAgO1xyXG5cclxuICAgICAgICBsZXQgYmFja2dyb3VuZCA9ICdiYWNrZ3JvdW5kOiBjb25pYy1ncmFkaWVudCgnXHJcblxyXG4gICAgICAgIGxldCBsYXN0Q29sb3VyUGVyY2VudCA9IDA7XHJcblxyXG4gICAgICAgIGNvbG9yQXJyYXlTb3J0ZWQuZm9yRWFjaCgoY29sb3IsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kICs9IFwiXFxuXCIgKyBjb2xvciArICcgMCUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHRoaXNDb2xvdXJQZXJjZW50ID0gKGNvbG9yQ291bnRzW2NvbG9yXSAvIGNvbG9yQXJyYXkubGVuZ3RoICogMTAwKTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZCArPSBcIiwgXFxuXCIgKyBjb2xvciArICcgJyArIChsYXN0Q29sb3VyUGVyY2VudCkgKyAnJSc7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQgKz0gXCIsIFxcblwiICsgY29sb3IgKyAnICcgKyAobGFzdENvbG91clBlcmNlbnQrdGhpc0NvbG91clBlcmNlbnQpICsgJyUnO1xyXG4gICAgICAgICAgICBsYXN0Q29sb3VyUGVyY2VudCArPSB0aGlzQ29sb3VyUGVyY2VudDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYmFja2dyb3VuZCArPSBcIlxcbik7XCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHJhbmRvbUlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xyXG5cclxuICAgICAgICByZXR1cm4gTC5kaXZJY29uKHtcclxuICAgICAgICAgICAgaHRtbDogYDxzdHlsZT4jY2x1c3Rlcl8ke3JhbmRvbUlkfTo6YmVmb3JlIHsgJHtiYWNrZ3JvdW5kfSB9PC9zdHlsZT4gPGRpdiBpZD0nY2x1c3Rlcl8ke3JhbmRvbUlkfSc+PHNwYW4+YCArIGNsdXN0ZXIuZ2V0Q2hpbGRDb3VudCgpICsgJzwvc3Bhbj48L2Rpdj4nLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBtYXJrZXJDbHVzdGVyUmFkaXVzKHpvb206IG51bWJlcikge1xyXG4gICAgICAgIHN3aXRjaCh6b29tKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgY2FzZSAxMzogcmV0dXJuIDE1MDtcclxuICAgICAgICAgICAgY2FzZSAxNDogcmV0dXJuIDEwMDtcclxuICAgICAgICAgICAgY2FzZSAxNTpcclxuICAgICAgICAgICAgY2FzZSAxNjpcclxuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGVIYW5kbGVyKG1vZGVIYW5kbGVyOiBJTW9kZSkge1xyXG5cclxuICAgICAgICB0aGlzLm1vZGVIYW5kbGVyID0gbW9kZUhhbmRsZXI7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY29sb3VyIG9mIHRoZSBwb2ludHNcclxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMucG9pbnRzKS5mb3JFYWNoKCh7bGF5ZXIsIHBvaW50fSkgPT4ge1xyXG4gICAgICAgICAgICBsYXllci5zZXRTdHlsZSh7XHJcbiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IG1vZGVIYW5kbGVyLnBvaW50Q29sb3VyKHBvaW50KSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxheWVyLnJlZHJhdygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMubWFya2Vycyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1hcmtlcnMgJiYgdGhpcy5tYXJrZXJzLmdldExheWVycygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMucmVmcmVzaENsdXN0ZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWZyZXNoTWFya2Vyc0luc2lkZUJvdW5kcyhib3VuZHM6IEwuTGF0TG5nQm91bmRzLCBtRmlsdGVyPzogKHBsYWNlOiBOYm5QbGFjZSkgPT4gYm9vbGVhbikge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGF0YXN0b3JlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YXN0b3JlIG5vdCBzZXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld1BvaW50cyA9IGF3YWl0IHRoaXMuZGF0YXN0b3JlLmdldEZ1bGxQb2ludHNXaXRoaW5Cb3VuZHMoYm91bmRzKTtcclxuICAgICAgICBcclxuICAgICAgICBuZXdQb2ludHNcclxuICAgICAgICAgICAgLmZvckVhY2gocG9pbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGF0TG5nU3RyaW5nID0gcG9pbnQubGF0bG5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBvaW50c1tsYXRMbmdTdHJpbmddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludHNbbGF0TG5nU3RyaW5nXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXI6IHRoaXMucmVuZGVyUG9pbnQocG9pbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvaW50c1tsYXRMbmdTdHJpbmddLnBvaW50ID0gcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICBpZiAobUZpbHRlcikge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlTGF5ZXJzOiBMLkxheWVyW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUG9pbnRzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnBvaW50cylcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHtsYXllciwgcG9pbnR9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hvd1BvaW50ID0gcG9pbnQucGxhY2VzLmZpbHRlcihtRmlsdGVyKS5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2hvd1BvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUxheWVycy5wdXNoKGxheWVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dQb2ludDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlbW92ZUxheWVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFya2Vycz8ucmVtb3ZlTGF5ZXJzKHJlbW92ZUxheWVycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubWFya2Vycz8uYWRkTGF5ZXJzKGZpbHRlcmVkUG9pbnRzLm1hcChwID0+IHAubGF5ZXIpKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXJzPy5hZGRMYXllcnMoT2JqZWN0LnZhbHVlcyh0aGlzLnBvaW50cykubWFwKHAgPT4gcC5sYXllcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZW1vdmVNYXJrZXJzT3V0c2lkZUJvdW5kcyhib3VuZHM6IEwuTGF0TG5nQm91bmRzKSB7XHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBoZXJlLCBhcyB0aGUgbWFya2VyIGNsdXN0ZXIgcGx1Z2luIGhhbmRsZXMgdGhpcyBmb3IgdXNcclxuICAgICAgICAvL2NvbnN0IHJlbW92ZU1hcmtlcnMgPSB0aGlzLm1hcmtlcnMuZ2V0TGF5ZXJzKClcclxuICAgICAgICAvLyAgICAuZmlsdGVyKChsYXllcjogTC5DaXJjbGVNYXJrZXIpID0+ICFib3VuZHMuY29udGFpbnMobGF5ZXIuZ2V0TGF0TG5nKCkpKVxyXG4gICAgICAgIC8vO1xyXG4gICAgICAgIC8vdGhpcy5tYXJrZXJzLnJlbW92ZUxheWVycyhyZW1vdmVNYXJrZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZW1vdmVBbGxNYXJrZXJzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMubWFya2Vycz8uY2xlYXJMYXllcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlcnMgYSBwb2ludCB1c2luZyB0aGUgY3VycmVudCBtb2RlIGhhbmRsZXIuXHJcbiAgICAgKiBAcGFyYW0gcG9pbnRcclxuICAgICAqIEByZXR1cm5zIFxyXG4gICAgICovXHJcbiAgICByZW5kZXJQb2ludChwb2ludDogUG9pbnRBbmRQbGFjZXMpOiBMLkNpcmNsZU1hcmtlciB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNpcmNsZU1hcmtlckxheWVyID0gTC5jaXJjbGVNYXJrZXIoWyBwb2ludC5sYXRpdHVkZSwgcG9pbnQubG9uZ2l0dWRlIF0sIHtcclxuICAgICAgICAgICAgcmFkaXVzOiA1LFxyXG4gICAgICAgICAgICBmaWxsQ29sb3I6IHRoaXMubW9kZUhhbmRsZXI/LnBvaW50Q29sb3VyKHBvaW50KSwgLy90aGlzLmdldFBsYWNlQ29sb3VyKHBsYWNlKSxcclxuICAgICAgICAgICAgY29sb3I6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICB3ZWlnaHQ6IDEsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjgsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNpcmNsZU1hcmtlckxheWVyLmJpbmRQb3B1cChcclxuICAgICAgICAgICAgKGxheWVyKSA9PiB0aGlzLnJlbmRlclBvcHVwKHBvaW50LnBsYWNlcykgfHwgJycsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGF1dG9QYW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY2lyY2xlTWFya2VyTGF5ZXIuYmluZFRvb2x0aXAoXHJcbiAgICAgICAgICAgIChsYXllcikgPT4gdGhpcy5tb2RlSGFuZGxlci5yZW5kZXJUb29sdGlwKHBvaW50LnBsYWNlcykgfHwgJycsXHJcbiAgICAgICAgICAgIHt9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2lyY2xlTWFya2VyTGF5ZXI7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclBvcHVwKHBsYWNlczogTmJuUGxhY2VbXSkgOiBIVE1MRWxlbWVudCB7XHJcblxyXG4gICAgICAgIGlmIChwbGFjZXMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZUhhbmRsZXIucmVuZGVyUG9wdXBDb250ZW50KHBsYWNlc1swXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kb3JQb3B1cE11bHRpKHBsYWNlcyk7XHJcblxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZW5kb3JQb3B1cE11bHRpKHBsYWNlczogTmJuUGxhY2VbXSkgOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgZ3JvdXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgY29uc3QgcGxhY2VDb250YWluZXJzOiBIVE1MRWxlbWVudFtdID0gW107XHJcblxyXG4gICAgICAgIHBsYWNlcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLmFkZHJlc3MxIDwgYi5hZGRyZXNzMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLmFkZHJlc3MxID4gYi5hZGRyZXNzMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBsYWNlIG9mIHBsYWNlcykge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcGxhY2VDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlQ29sb3VyID0gdGhpcy5tb2RlSGFuZGxlci5wbGFjZUNvbG91cihwbGFjZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgQWNjb3JkaW9uIEJ1dHRvblxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlvbicpO1xyXG4gICAgICAgICAgICBidXR0b24udHlwZSA9ICdidXR0b24nO1xyXG4gICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gYDxzdmcgaGVpZ2h0PVwiMTVcIiB3aWR0aD1cIjE1XCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6M3B4XCI+YFxyXG4gICAgICAgICAgICAgICAgKyBgPGNpcmNsZSBjbGFzcz1cImNpcmNsZVwiIGN4PVwiNy41XCIgY3k9XCI5XCIgcj1cIjVcIiBzdHJva2U9XCIjMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGw9XCIke3BsYWNlQ29sb3VyfVwiIC8+YFxyXG4gICAgICAgICAgICAgICAgKyBgPC9zdmc+YFxyXG4gICAgICAgICAgICAgICAgKyBgPHNwYW4+JHtwbGFjZS5hZGRyZXNzMX08L3NwYW4+YFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQWRkIFBhbmVsXHJcbiAgICAgICAgICAgIGNvbnN0IHBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHBhbmVsLmNsYXNzTGlzdC5hZGQoJ3BhbmVsJyk7XHJcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHRoaXMubW9kZUhhbmRsZXIucmVuZGVyUG9wdXBDb250ZW50KHBsYWNlKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBZGQgRXZlbnRzXHJcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50bHlBY3RpdmUgPSBwbGFjZUNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYWxsIGJ1dHRvbnMgYW5kIHBhbmVsc1xyXG4gICAgICAgICAgICAgICAgcGxhY2VDb250YWluZXJzLmZvckVhY2goKHBsYWNlQ29udGFpbmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRseUFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdG8gRE9NXHJcbiAgICAgICAgICAgIHBsYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIHBsYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKHBhbmVsKTtcclxuICAgICAgICAgICAgZ3JvdXBEaXYuYXBwZW5kQ2hpbGQocGxhY2VDb250YWluZXIpO1xyXG4gICAgICAgICAgICBwbGFjZUNvbnRhaW5lcnMucHVzaChwbGFjZUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGdyb3VwRGl2O1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICBnZXRQbGFjZUNvbG91cihwbGFjZTogTmJuUGxhY2UpIHtcclxuXHJcbiAgICAgICAgLyoqIEVFIERpc3BsYXkgTW9kZSAqL1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbHMuZGlzcGxheU1vZGUuZGlzcGxheU1vZGUgPT0gJ2VlJykge1xyXG5cclxuICAgICAgICAgICAgaWYocGxhY2UuY2JkcHJpY2luZyAmJiBwbGFjZS56ZXJvQnVpbGRDb3N0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3VyRUVfQ0JEX1pCQztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYocGxhY2UuY2JkcHJpY2luZyAmJiAhcGxhY2UuemVyb0J1aWxkQ29zdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG91ckVFX0NCRF9CQztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoIXBsYWNlLmNiZHByaWNpbmcgJiYgcGxhY2UuemVyb0J1aWxkQ29zdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG91ckVFX1oxMjNfWkJDO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZighcGxhY2UuY2JkcHJpY2luZyAmJiAhcGxhY2UuemVyb0J1aWxkQ29zdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG91ckVFX1oxMjNfQkM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvdXJVbmtub3duO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xzLmRpc3BsYXlNb2RlLmRpc3BsYXlNb2RlID09ICd1cGdyYWRlJykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3dpdGNoIChwbGFjZS50ZWNoQ2hhbmdlU3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdQcmV2aW91cyBUZWNoIERpc2Nvbm5lY3RlZCc6IHJldHVybiBDT0xfVEVDSF9DT01QTEVURTtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ05ldyBUZWNoIENvbm5lY3RlZCcgOiByZXR1cm4gQ09MX1RFQ0hfQ09NUExFVEU7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdJbiBEZXNpZ24nOiByZXR1cm4gQ09MX1RFQ0hfREVTSUdOO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQnVpbGQgRmluYWxpc2VkJzogcmV0dXJuIENPTF9URUNIX0JVSUxERklOQUxJU0VEO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQ29tbWl0dGVkJzogcmV0dXJuIENPTF9URUNIX0NPTU1JVFRFRDtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0VsaWdpYmxlIFRvIE9yZGVyJzogcmV0dXJuIENPTF9URUNIX0FWQUlMO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTURVIENvbXBsZXggRWxpZ2libGUgVG8gQXBwbHknOiByZXR1cm4gQ09MX1RFQ0hfTURVX0VMSUdJQkxFO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTURVIENvbXBsZXggUHJlbWlzZXMgSW4gQnVpbGQnOiByZXR1cm4gQ09MX1RFQ0hfTURVX0lOQlVJTEQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvdXJVbmtub3duO1xyXG4gICAgICAgIH0qL1xyXG4vKlxyXG4gICAgICAgIGlmIChpc1BsYWNlRlRUUChwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG91ckZUVFA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNQbGFjZUZUVFBBdmFpbChwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG91ckZUVFBBdmFpbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc1BsYWNlRlRUUFNvb24ocGxhY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvdXJGVFRQU29vbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc1BsYWNlRlRUUEZhcihwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFRlY2hDb2xvdXIocGxhY2UudGVjaFR5cGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzUGxhY2VGVFRDKHBsYWNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3VyRlRUQztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc0ZXdG9GVFRDKHBsYWNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3VyRlRUQ0F2YWlsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzRnd0b0ZUVE4ocGxhY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvdXJGVFROQjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzU2F0VG9GVyhwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG91ckZXQXZhaWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGxhY2UuYWx0UmVhc29uQ29kZSAmJiBwbGFjZS5hbHRSZWFzb25Db2RlICE9ICdOVUxMX05BJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwbGFjZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZXRUZWNoQ29sb3VyKHBsYWNlLnRlY2hUeXBlKTtcclxuICAgIH1cclxuKi9cclxuXHJcbn0iLCJpbXBvcnQgeyBOYm5QbGFjZSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNEZWJ1Z01vZGUoKSB7XHJcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCdcclxuICAgICAgICB8fCB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnbG9jYWxob3N0JylcclxuICAgICAgICB8fCB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnZGVidWc9dHJ1ZScpXHJcbiAgICA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWNlRlRUUChwbGFjZTogTmJuUGxhY2UpIHtcclxuICAgIHJldHVybiBwbGFjZS50ZWNoVHlwZSA9PT0gJ0ZUVFAnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNQbGFjZUZUVE4ocGxhY2U6IE5iblBsYWNlKSB7XHJcbiAgICByZXR1cm4gcGxhY2UudGVjaFR5cGUgPT09ICdGVFROJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhY2VIRkMocGxhY2U6IE5iblBsYWNlKSB7XHJcbiAgICByZXR1cm4gcGxhY2UudGVjaFR5cGUgPT09ICdIRkMnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNQbGFjZUZUVEIocGxhY2U6IE5iblBsYWNlKSB7XHJcbiAgICByZXR1cm4gcGxhY2UudGVjaFR5cGUgPT09ICdGVFRCJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhY2VGVFRDKHBsYWNlOiBOYm5QbGFjZSkge1xyXG4gICAgaWYocGxhY2UudGVjaFR5cGUgPT0gXCJGVFRDXCJcclxuICAgICAgICAmJiBwbGFjZS5yZWFzb25Db2RlICYmIHBsYWNlLnJlYXNvbkNvZGUubWF0Y2goL15GVFRDLylcclxuICAgICAgICAmJiBwbGFjZS50ZWNoQ2hhbmdlU3RhdHVzID09ICdOZXcgVGVjaCBDb25uZWN0ZWQnXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhY2VGaXhlZFdpcmVsZXNzKHBsYWNlOiBOYm5QbGFjZSkge1xyXG4gICAgcmV0dXJuIHBsYWNlLnRlY2hUeXBlID09PSAnRml4ZWQgV2lyZWxlc3MnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNQbGFjZVNhdGVsbGl0ZShwbGFjZTogTmJuUGxhY2UpIHtcclxuICAgIHJldHVybiBwbGFjZS50ZWNoVHlwZSA9PT0gJ1NhdGVsbGl0ZSc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWNlRlRUUEF2YWlsKHBsYWNlOiBOYm5QbGFjZSkge1xyXG4gICAgaWYgKHBsYWNlLmFsdFJlYXNvbkNvZGUgJiYgcGxhY2UuYWx0UmVhc29uQ29kZS5tYXRjaCgvXkZUVFAvKSkge1xyXG4gICAgICAgIHN3aXRjaChwbGFjZS50ZWNoQ2hhbmdlU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0VsaWdpYmxlIFRvIE9yZGVyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhY2VGVFRQU29vbihwbGFjZTogTmJuUGxhY2UpIHtcclxuICAgIGlmIChwbGFjZS5hbHRSZWFzb25Db2RlICYmIHBsYWNlLmFsdFJlYXNvbkNvZGUubWF0Y2goL15GVFRQLykpIHtcclxuICAgICAgICBzd2l0Y2gocGxhY2UudGVjaENoYW5nZVN0YXR1cykge1xyXG4gICAgICAgICAgICBjYXNlICdJbiBEZXNpZ24nOlxyXG4gICAgICAgICAgICBjYXNlICdCdWlsZCBGaW5hbGlzZWQnOlxyXG4gICAgICAgICAgICBjYXNlICdQbGFubmVkJzpcclxuICAgICAgICAgICAgY2FzZSAnTURVIENvbXBsZXggRWxpZ2libGUgVG8gQXBwbHknOlxyXG4gICAgICAgICAgICBjYXNlICdNRFUgQ29tcGxleCBQcmVtaXNlcyBJbiBCdWlsZCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWNlRlRUUEZhcihwbGFjZTogTmJuUGxhY2UpIHtcclxuICAgIGlmIChwbGFjZS5hbHRSZWFzb25Db2RlICYmIHBsYWNlLmFsdFJlYXNvbkNvZGUubWF0Y2goL15GVFRQLykpIHtcclxuICAgICAgICBzd2l0Y2gocGxhY2UudGVjaENoYW5nZVN0YXR1cykge1xyXG4gICAgICAgICAgICBjYXNlICdDb21taXR0ZWQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNGd3RvRlRUTihwbGFjZTogTmJuUGxhY2UpIHtcclxuICAgIHJldHVybiBwbGFjZS50ZWNoVHlwZSA9PSBcIkZUVE5cIlxyXG4gICAgICAgICYmIHBsYWNlLnJlYXNvbkNvZGUgPT0gXCJGVFROX1NBXCJcclxuICAgICAgICAmJiBwbGFjZS5hbHRSZWFzb25Db2RlID09IFwiRldfQ1RcIlxyXG4gICAgICAgICYmIHBsYWNlLnRlY2hDaGFuZ2VTdGF0dXMgPT0gJ0VsaWdpYmxlIFRvIE9yZGVyJ1xyXG4gICAgO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNGd3RvRlRUQyhwbGFjZTogTmJuUGxhY2UpIHtcclxuICAgIHJldHVybiBwbGFjZS50ZWNoVHlwZSA9PSBcIkZUVENcIlxyXG4gICAgICAgICYmIHBsYWNlLnJlYXNvbkNvZGUgPT0gXCJGVFRDX1NBXCJcclxuICAgICAgICAmJiBwbGFjZS5hbHRSZWFzb25Db2RlID09IFwiRldfQ1RcIlxyXG4gICAgICAgICYmIHBsYWNlLnRlY2hDaGFuZ2VTdGF0dXMgPT0gJ0VsaWdpYmxlIFRvIE9yZGVyJ1xyXG4gICAgO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTYXRUb0ZXKHBsYWNlOiBOYm5QbGFjZSkge1xyXG4gICAgcmV0dXJuIHBsYWNlLnRlY2hUeXBlID09IFwiV0lSRUxFU1NcIlxyXG4gICAgICAgICYmIHBsYWNlLnJlYXNvbkNvZGUgPT0gXCJGV19TQVwiXHJcbiAgICAgICAgJiYgcGxhY2UudGVjaENoYW5nZVN0YXR1cyA9PSAnRWxpZ2libGUgVG8gT3JkZXInXHJcbiAgICA7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgTCBmcm9tICdsZWFmbGV0JztcclxuXHJcbmltcG9ydCB7IE5iblBsYWNlLCBQb2ludEFuZExvY2lkcywgTmJuUGxhY2VBcGlSZXNwb25zZSwgTmJuVGVjaE1hcE9wdGlvbnMgfSBmcm9tICcuL3R5cGVzJztcclxuLy9pbXBvcnQgTWFya2VyR3JvdXAgZnJvbSAnLi9tYXJrZXJfZ3JvdXAuY2xhc3MudHMuZGV2JztcclxuLy9pbXBvcnQgQ29udHJvbFpvb21XYXJuaW5nIGZyb20gJy4vY29udHJvbF96b29tX3dhcm5pbmcuY2xhc3MnO1xyXG4vL2ltcG9ydCBDb250cm9sRmlsdGVyIGZyb20gJy4vY29udHJvbF9maWx0ZXIuY2xhc3MnO1xyXG5cclxuLy9pbXBvcnQgJ2xlYWZsZXQtZ29vZ2xlLXBsYWNlcy1hdXRvY29tcGxldGUnO1xyXG4vL2ltcG9ydCAqIGFzIE1hcmtlckNsdXN0ZXIgZnJvbSAnbGVhZmxldC5tYXJrZXJjbHVzdGVyJztcclxuXHJcbi8vaW1wb3J0ICogYXMgTG9jYXRlQ29udHJvbCBmcm9tICdsZWFmbGV0LmxvY2F0ZWNvbnRyb2wnO1xyXG4vL2ltcG9ydCAnbGVhZmxldC5sb2NhdGVjb250cm9sL2Rpc3QvTC5Db250cm9sLkxvY2F0ZS5taW4uY3NzJ1xyXG5pbXBvcnQgSUFwaSBmcm9tICcuL2ludGVyZmFjZXMvYXBpLmludGVyZmFjZSc7XHJcbmltcG9ydCBJRGF0YXN0b3JlIGZyb20gJy4vaW50ZXJmYWNlcy9kYXRhc3RvcmUuaW50ZXJmYWNlJztcclxuaW1wb3J0IElNYXJrZXJMYXllciBmcm9tICcuL2ludGVyZmFjZXMvbWFya2VybGF5ZXIuaW50ZXJmYWNlJztcclxuaW1wb3J0IE1hcmtlckxheWVyQ2x1c3RlciBmcm9tICcuL2NsYXNzZXMvbWFya2VybGF5ZXIuY2x1c3Rlci5jbGFzcyc7XHJcbmltcG9ydCBJQ29udHJvbCBmcm9tICcuL2ludGVyZmFjZXMvY29udHJvbC5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBpc0RlYnVnTW9kZSB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgSU1vZGUgZnJvbSAnLi9pbnRlcmZhY2VzL21vZGUuaW50ZXJmYWNlJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3VuZEJvdW5kcyhib3VuZHM6IEwuTGF0TG5nQm91bmRzKTogTC5MYXRMbmdCb3VuZHMge1xyXG4gICAgY29uc3Qgbm9ydGggPSBNYXRoLmNlaWwoYm91bmRzLmdldE5vcnRoKCkgKiA1MCkgLyA1MDtcclxuICAgIGNvbnN0IHdlc3QgPSBNYXRoLmZsb29yKGJvdW5kcy5nZXRXZXN0KCkgKiAyNSkgLyAyNTtcclxuICAgIGNvbnN0IHNvdXRoID0gTWF0aC5mbG9vcihib3VuZHMuZ2V0U291dGgoKSAqIDUwKSAvIDUwO1xyXG4gICAgY29uc3QgZWFzdCA9IE1hdGguY2VpbChib3VuZHMuZ2V0RWFzdCgpICogMjUpIC8gMjU7XHJcbiAgICByZXR1cm4gTC5sYXRMbmdCb3VuZHMoW3NvdXRoLCB3ZXN0XSwgW25vcnRoLCBlYXN0XSk7XHJcbn1cclxuXHJcbmNvbnN0IE1BWF9CT1hFU19JTl9WSUVXID0gMTAwMDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5iblRlY2hNYXAge1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBERUZBVUxUX09QVElPTlM6IFBhcnRpYWw8TmJuVGVjaE1hcE9wdGlvbnM+ID0ge1xyXG4gICAgICAgIG1hcENvbnRhaW5lcklkOiAnbWFwJyxcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBQcm9wZXJ0eSB7bWFwfSAtIExlYWZsZXQgbWFwIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBtYXA6IEwuTWFwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQFByb3BlcnR5IHttYXBUaWxlTGF5ZXJ9IC0gTGVhZmxldCBtYXAgdGlsZSBsYXllci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBtYXBUaWxlTGF5ZXI6IEwuVGlsZUxheWVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQFByb3BlcnR5IHthcGl9IC0gQVBJIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhcGk6IElBcGk7XHJcblxyXG5cclxuICAgIHByaXZhdGUgbWFwTG9jYXRlOiBhbnk7XHJcbiAgICBwcml2YXRlIG1hcFNlYXJjaDogYW55O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQFByb3BlcnR5IHtkYXRhc3RvcmV9IC0gRGF0YXN0b3JlIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBkYXRhc3RvcmU6IElEYXRhc3RvcmU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAUHJvcGVydHkge21hcmtlckxheWVyfSAtIExheWVyIHRvIGhvbGQgbWFya2Vyc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1hcmtlckxheWVyOiBJTWFya2VyTGF5ZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAUHJvcGVydHkge21hcmtlckZpbHRlcn0gLSBGdW5jdGlvbiB0byBmaWx0ZXIgbWFya2Vyc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1hcmtlckZpbHRlcjogKHBsYWNlOiBOYm5QbGFjZSkgPT4gYm9vbGVhbiA9IChwbGFjZTogTmJuUGxhY2UpID0+IHRydWU7XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RlSGFuZGxlcjogSU1vZGU7XHJcblxyXG4gICAgLy8gU3RvcmVzIG1hcCBjb250cm9sc1xyXG4gICAgLypjb250cm9sczoge1trZXk6IHN0cmluZ106IGFueX0gPSB7XHJcbiAgICAgICAgem9vbVdhcm5pbmc6IG51bGwsXHJcbiAgICAgICAgbGVnZW5kOiBudWxsLFxyXG4gICAgICAgIGRpc3BsYXlNb2RlOiBudWxsLFxyXG4gICAgICAgIGZpbHRlcjogbnVsbCxcclxuICAgIH0qL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0geyp9IG9wdGlvbnMgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IE5iblRlY2hNYXBPcHRpb25zKSB7XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSB7IC4uLk5iblRlY2hNYXAuREVGQVVMVF9PUFRJT05TLCAuLi5vcHRpb25zIH07XHJcblxyXG4gICAgICAgIHRoaXMuYXBpID0gb3B0aW9ucy5hcGk7XHJcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSBvcHRpb25zLmRhdGFzdG9yZTtcclxuICAgICAgICB0aGlzLm1vZGVIYW5kbGVyID0gb3B0aW9ucy5kZWZhdWx0TW9kZUhhbmRsZXI7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFwXHJcbiAgICAgICAgdGhpcy5tYXAgPSBMLm1hcChvcHRpb25zLm1hcENvbnRhaW5lcklkLCB7IHByZWZlckNhbnZhczogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHVwIHRoZSBtYXJrZXIgbGF5ZXJcclxuICAgICAgICB0aGlzLm1hcmtlckxheWVyID0gbmV3IE1hcmtlckxheWVyQ2x1c3RlcihcclxuICAgICAgICAgICAgdGhpcy5tYXAsIHRoaXMuZGF0YXN0b3JlLCB0aGlzLm1vZGVIYW5kbGVyXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICAvLyBTZXQgdXAgdGhlIE9TTSBsYXllclxyXG4gICAgICAgIHRoaXMubWFwVGlsZUxheWVyID0gTC50aWxlTGF5ZXIoJ2h0dHBzOi8ve3N9LmJhc2VtYXBzLmNhcnRvY2RuLmNvbS9yYXN0ZXJ0aWxlcy92b3lhZ2VyL3t6fS97eH0ve3l9e3J9LnBuZycsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRpb246ICcmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycyAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uc1wiPkNBUlRPPC9hPicsXHJcbiAgICAgICAgICAgIHN1YmRvbWFpbnM6ICdhYmNkJyxcclxuICAgICAgICAgICAgY3Jvc3NPcmlnaW46IHRydWUsXHJcbiAgICAgICAgICAgIG1heFpvb206IDIwXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCB0aGUgbGF5ZXIgdG8gdGhlIG1hcFxyXG4gICAgICAgIHRoaXMubWFwVGlsZUxheWVyLmFkZFRvKHRoaXMubWFwKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IGRlZmF1bHQgdmlldyAoQ2VudHJlZCBvdmVyIEF1c3RyYWxpYSlcclxuICAgICAgICAvLyBHZXQgdGhlIGxhc3QgbWFwIHBvc2l0aW9uIGZyb20gbG9jYWwgc3RvcmFnZVxyXG4gICAgICAgIC8vIElmIG5vIHBvc2l0aW9uIGlzIGZvdW5kLCBkZWZhdWx0IHRvIEF1c3RyYWxpYVxyXG4gICAgICAgIGNvbnN0IHN0YXJ0UG9zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RhcnRwb3MnKSB8fCAnJyk7XHJcbiAgICAgICAgaWYgKHN0YXJ0UG9zKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwLnNldFZpZXcoWyBzdGFydFBvcy5sYXQsIHN0YXJ0UG9zLmxuZyBdLCBzdGFydFBvcy56b29tKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwLnNldFZpZXcoWyAtMjYuMTc3MjI4OCwgMTMzLjQxNzAxMTkgXSwgNCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHN0b3JlIG1hcCBwb3NpdGlvbiB3aGVuIG1vdmVkIG9yIHpvb21lZFxyXG4gICAgICAgIHRoaXMubWFwLm9uKCdtb3ZlZW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLm1hcC5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgY29uc3Qgem9vbSA9IHRoaXMubWFwLmdldFpvb20oKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0YXJ0cG9zJywgSlNPTi5zdHJpbmdpZnkoeyBsYXQ6IGNlbnRlci5sYXQsIGxuZzogY2VudGVyLmxuZywgem9vbSB9KSk7XHJcblxyXG4gICAgICAgICAgICAvL2F3YWl0IHRoaXMuZGlzcGxheU1hcmtlcnNJbkN1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhRm9yQ3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5mZXRjaERhdGFGb3JDdXJyZW50VmlldygpO1xyXG4gICAgICAgIC8qdGhpcy5kaXNwbGF5TWFya2Vyc0luQ3VycmVudFZpZXcoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmZldGNoRGF0YUZvckN1cnJlbnRWaWV3KCkpKi9cclxuXHJcbiAgICAgICAgLy90aGlzLmNyZWF0ZU1hcChvcHRpb25zLm1hcENvbnRhaW5lcklkKTtcclxuICAgICAgICAvL3RoaXMuZGF0YXN0b3JlID0gbmV3IE1lbW9yeURhdGFzdG9yZSh0aGlzKTtcclxuICAgICAgICAvL3RoaXMubWFya2VyR3JvdXAgPSBuZXcgTWFya2VyR3JvdXAodGhpcyk7XHJcbiAgICAgICAgLy90aGlzLmNvbnRyb2xzLnpvb21XYXJuaW5nID0gbmV3IENvbnRyb2xab29tV2FybmluZyh0aGlzKTtcclxuICAgICAgICAvL3RoaXMuY29udHJvbHMuZGlzcGxheU1vZGUgPSBuZXcgQ29udHJvRGlzcGxheU1vZGUodGhpcyk7XHJcbiAgICAgICAgLy90aGlzLmNvbnRyb2xzLmxlZ2VuZCA9IG5ldyBDb250cm9sTGVnZW5kKHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5jb250cm9scy5maWx0ZXIgPSBuZXcgQ29udHJvbEZpbHRlcih0aGlzKTtcclxuXHJcbiAgICAgICAgLy90aGlzLmluaXRNYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCb3hlc0luQm91bmRzKGJvdW5kczogTC5MYXRMbmdCb3VuZHMpOiBMLkxhdExuZ0JvdW5kc1tdIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gU3RhcnRpbmcgcG9pbnQgc2hvdWxkIGJlIHRoZSBub3J0aC13ZXN0IGNvcm5lciBvZiB0aGUgbWFwIHJvdW5kZWQgYmV5b25kIHRoZSBtYXAgYm91bmRzXHJcbiAgICAgICAgLy8gTGF0aXR1ZGUgaXMgcm91bmRlZCB0byAyIGRlY2ltYWwgcGxhY2VzIG11bHRpcGxlIG9mIDAuMDJcclxuICAgICAgICAvLyBMb25naXR1ZGUgaXMgcm91bmRlZCB0byAyIGRlY2ltYWwgcGxhY2VzIG11bHRpcGxlIG9mIDAuMDRcclxuICAgICAgICBjb25zdCBub3J0aG1vc3QgPSBNYXRoLmNlaWwoYm91bmRzLmdldE5vcnRoKCkgKiA1MCkgLyA1MDtcclxuICAgICAgICBjb25zdCB3ZXN0bW1vc3QgPSBNYXRoLmZsb29yKGJvdW5kcy5nZXRXZXN0KCkgKiAyNSkgLyAyNTtcclxuXHJcbiAgICAgICAgLy8gc3BsaXQgbWFwIGludG8gYm94ZXMgc3RhcnRpbmcgZnJvbSBub3J0aC13ZXN0IGNvcm5lclxyXG4gICAgICAgIC8vIGVhY2ggYm94IHNob3VsZCBiZSAwLjAyIGRlZ3JlZXMgbGF0aXR1ZGUgYnkgMC4wNCBkZWdyZWVzIGxvbmdpdHVkZVxyXG4gICAgICAgIGNvbnN0IGJveGVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgbGF0aXR1ZGUgPSBub3J0aG1vc3Q7IGxhdGl0dWRlID4gYm91bmRzLmdldFNvdXRoKCk7IGxhdGl0dWRlIC09IDAuMDIpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbG9uZ2l0dWRlID0gd2VzdG1tb3N0OyBsb25naXR1ZGUgPCBib3VuZHMuZ2V0RWFzdCgpOyBsb25naXR1ZGUgKz0gMC4wNCkge1xyXG4gICAgICAgICAgICAgICAgYm94ZXMucHVzaChbbGF0aXR1ZGUsIGxvbmdpdHVkZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNYXAgZWFjaCBib3ggaW50byBhIGJvdW5kcyBvYmplY3RcclxuICAgICAgICBjb25zdCBib3hCb3VuZHMgPSBib3hlcy5tYXAoYm94ID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ydGggPSBib3hbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IHdlc3QgPSBib3hbMV07XHJcbiAgICAgICAgICAgIGNvbnN0IHNvdXRoID0gbm9ydGggLSAwLjAyO1xyXG4gICAgICAgICAgICBjb25zdCBlYXN0ID0gd2VzdCArIDAuMDQ7XHJcbiAgICAgICAgICAgIHJldHVybiBMLmxhdExuZ0JvdW5kcyhbc291dGgsIHdlc3RdLCBbbm9ydGgsIGVhc3RdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGJveEJvdW5kcztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZXRjaCBib3hlcyB0aGF0IGFyZSB2aXNpYmxlIG9uIHRoZSBtYXBcclxuICAgICAqL1xyXG4gICAgZ2V0Q3VycmVudFZpZXdCb3hlcygpOiBMLkxhdExuZ0JvdW5kc1tdXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Qm94ZXNJbkJvdW5kcyh0aGlzLm1hcC5nZXRCb3VuZHMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWRlIG1hcmtlcnMgdGhhdCBhcmUgb3V0c2lkZSB0aGUgbWFwIGJvdW5kc1xyXG4gICAgICovXHJcbiAgICBoaWRlTWFya2Vyc091dHNpZGVDdXJyZW50VmlldygpIHtcclxuICAgICAgICBpZiAoIXRoaXMubWFya2VyTGF5ZXIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNYXJrZXIgTGF5ZXIgbm90IHNldCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGlkZSBtYXJrZXJzIHRoYXQgYXJlIG91dHNpZGUgdGhlIG1hcCBib3VuZHNcclxuICAgICAgICBjb25zdCBtYXBCb3VuZHMgPSB0aGlzLm1hcC5nZXRCb3VuZHMoKS5wYWQoMC41KTtcclxuICAgICAgICB0aGlzLm1hcmtlckxheWVyLnJlbW92ZU1hcmtlcnNPdXRzaWRlQm91bmRzKG1hcEJvdW5kcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5IG1hcmtlcnMgdGhhdCBhcmUgaW5zaWRlIHRoZSBtYXAgYm91bmRzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpc3BsYXlNYXJrZXJzSW5DdXJyZW50VmlldyhhdHRlbXB0OiBudW1iZXIgPSAxKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhdGFzdG9yZS5pc1JlYWR5KCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYXR0ZW1wdCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZ2V0IGRhdGFzdG9yZSByZWFkeS4gR2l2aW5nIHVwLicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RhdGFzdG9yZSBpcyBub3QgcmVhZHkuIERlbGF5aW5nIGRpc3BsYXlNYXJrZXJzSW5DdXJyZW50VmlldygpJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5kaXNwbGF5TWFya2Vyc0luQ3VycmVudFZpZXcoYXR0ZW1wdCsxKSwgMTAwMCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEaXNwbGF5aW5nIG1hcmtlcnMgaW4gY3VycmVudCB2aWV3Jyk7XHJcbiAgICAgICAgY29uc3QgbWFwQm91bmRzID0gcm91bmRCb3VuZHModGhpcy5tYXAuZ2V0Qm91bmRzKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBmcm9tIERhdGFzdG9yZScsIG1hcEJvdW5kcyk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoUG9pbnRzRnJvbVN0b3JlKG1hcEJvdW5kcyk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZXRjaCBkYXRhIGZvciBjdXJyZW50IG1hcCB2aWV3XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZldGNoRGF0YUZvckN1cnJlbnRWaWV3KCkge1xyXG5cclxuICAgICAgICB0aGlzLmhpZGVNYXJrZXJzT3V0c2lkZUN1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWFya2Vyc0luQ3VycmVudFZpZXcoKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IGJveGVzIHRoYXQgYXJlIGN1cnJlbnRseSB2aXNpYmxlXHJcbiAgICAgICAgY29uc3QgYm94ZXMgPSB0aGlzLmdldEN1cnJlbnRWaWV3Qm94ZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKGlzRGVidWdNb2RlKCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0N1cnJlbnQgdmlldyBib3hlcycsIGJveGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERvbid0IGZldGNoIGJveGVzIGlmIG1vcmUgdGhhbiA4MFxyXG4gICAgICAgIGlmIChib3hlcy5sZW5ndGggPiBNQVhfQk9YRVNfSU5fVklFVykge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RvbyBtYW55IGJveGVzIHRvIGZldGNoLiBTa2lwcGluZy4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoaXNEZWJ1Z01vZGUoKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgYm94ZXMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZmV0Y2hQcm9taXNlcyA9IGJveGVzLm1hcChib3ggPT4gdGhpcy5mZXRjaERhdGEoYm94KSk7XHJcblxyXG4gICAgICAgIGlmIChpc0RlYnVnTW9kZSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXYWl0aW5nIGZvciBib3hlcyB0byBiZSBmZXRjaGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChmZXRjaFByb21pc2VzKTtcclxuXHJcbiAgICAgICAgaWYgKGlzRGVidWdNb2RlKCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0FsbCBib3hlcyBmZXRjaGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hQb2ludHNGcm9tU3RvcmUodGhpcy5tYXAuZ2V0Qm91bmRzKCkucGFkKDAuNSkpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZldGNoRGF0YShcclxuICAgICAgICBib3VuZHM6IEwuTGF0TG5nQm91bmRzLCBwYWdlOiBudW1iZXIgPSAxXHJcbiAgICApIDogUHJvbWlzZTx2b2lkPlxyXG4gICAge1xyXG5cclxuICAgICAgICBpZiAoaXNEZWJ1Z01vZGUoKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgQm94JywgYm91bmRzLmdldENlbnRlcigpLnRvU3RyaW5nKCksIHBhZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmFwaS5mZXRjaFBhZ2UoYm91bmRzLCBwYWdlLCAoKSA9PiB0aGlzLm1hcC5nZXRCb3VuZHMoKS5pbnRlcnNlY3RzKGJvdW5kcykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzRmV0Y2hSZXN1bHQoZGF0YSwgYm91bmRzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLm5leHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoRGF0YShib3VuZHMsIGRhdGEubmV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PSAnUGFnZSBhbHJlYWR5IGxvYWRlZCB0aGlzIHNlc3Npb24uJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwcm9jZXNzRmV0Y2hSZXN1bHQocmVzdWx0OiBOYm5QbGFjZUFwaVJlc3BvbnNlLCBib3VuZHM6IEwuTGF0TG5nQm91bmRzKSB7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgcGFnZScsIChyZXN1bHQubmV4dCB8fCAyKS0xLCAnb2YnLCByZXN1bHQudG90YWwsICd3aXRoJywgcmVzdWx0LnBsYWNlcy5sZW5ndGgsICdwbGFjZXMuJyk7XHJcblxyXG4gICAgICAgIC8vIElmIG1vcmUgcGFnZXMsIHN0YXJ0IGZldGNoaW5nIG5leHQgcGFnZVxyXG4gICAgICAgIC8qaWYgKHJlc3VsdC5uZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKGJvdW5kcywgcmVzdWx0Lm5leHQpO1xyXG4gICAgICAgIH0qL1xyXG5cclxuICAgICAgICAvLyBQcm9jZXNzIHBsYWNlc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTdG9yaW5nIHBsYWNlcy4nKVxyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NQcm9taXNlID0gdGhpcy5kYXRhc3RvcmUuc3RvcmVQbGFjZXMocmVzdWx0LnBsYWNlcyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1dhaXRpbmcgZm9yIHBsYWNlIHN0b3JpbmcgdG8gZmluaXNoJyk7XHJcbiAgICAgICAgYXdhaXQgcHJvY2Vzc1Byb21pc2U7XHJcblxyXG4gICAgICAgIC8vIFJlZnJlc2ggcG9pbnRzIGluc2lkZSBib3VuZHNcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdSZWZyZXNoaW5nIHBvaW50cyBpbnNpZGUgYm91bmRzLicpO1xyXG4gICAgICAgIC8vYXdhaXQgdGhpcy5yZWZyZXNoUG9pbnRzRnJvbVN0b3JlKGJvdW5kcyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlZnJlc2hQb2ludHNGcm9tU3RvcmUoYm91bmRzPzogTC5MYXRMbmdCb3VuZHMpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm1hcmtlckxheWVyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWFya2VyIExheWVyIG5vdCBzZXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIGJvdW5kcyBhcmUgbm90IHBhc3NlZCwgdXNlIG1hcCBib3VuZHNcclxuICAgICAgICBpZiAoIWJvdW5kcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQm91bmRzIG5vdCBwYXNzZWQuIFVzaW5nIG1hcCBib3VuZHMuJyk7XHJcbiAgICAgICAgICAgIGJvdW5kcyA9IHRoaXMubWFwLmdldEJvdW5kcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm91bmRzID0gcm91bmRCb3VuZHMoYm91bmRzKTtcclxuICAgICAgICB0aGlzLm1hcmtlckxheWVyLnJlZnJlc2hNYXJrZXJzSW5zaWRlQm91bmRzKGJvdW5kcywgdGhpcy5tYXJrZXJGaWx0ZXIpO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgIC8vIEdldCB0aGUgYm94ZXNcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVmcmVzaGluZyBwb2ludHMgd2l0aGluIGJvdW5kcycsIGJvdW5kcy50b0JCb3hTdHJpbmcoKSk7XHJcbiAgICAgICAgY29uc3QgcG9pbnRzID0gYXdhaXQgdGhpcy5kYXRhc3RvcmUuZ2V0UG9pbnRzV2l0aGluQm91bmRzKGJvdW5kcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vIGFkZCBwb2ludHMgdG8gbWFwIHRoYXQgZG9uJ3QgYWxyZWFkeSBleGlzdCBpbiBsYXllclxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzW2ldO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWFya2VyID0gTC5jaXJjbGVNYXJrZXIoW3BvaW50LmxhdGl0dWRlLCBwb2ludC5sb25naXR1ZGVdLCB7XHJcbiAgICAgICAgICAgICAgICByYWRpdXM6IDUsXHJcbiAgICAgICAgICAgICAgICAvL2ZpbGxDb2xvcjogdGhpcy5nZXRQbGFjZUNvbG91cihwbGFjZSksXHJcbiAgICAgICAgICAgICAgICAvL2NvbG9yOiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgIHdlaWdodDogMSxcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC44LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBwb3B1cFxyXG4gICAgICAgICAgICBtYXJrZXIuYmluZFBvcHVwKHBvaW50LmxvY2lkcy5qb2luKCc8YnIgLz4nKSk7XHJcbiAgICAgICAgICAgIG1hcmtlci5vbigncG9wdXBvcGVuJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclBvcHVwQ29udGVudChwb2ludClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjb250ZW50ID0+IGV2ZW50LnBvcHVwLnNldENvbnRlbnQoY29udGVudCkpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXJrZXJMYXllci5hZGRMYXllcihtYXJrZXIpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb250cm9sczoge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IElDb250cm9sO1xyXG4gICAgfSA9IHt9O1xyXG5cclxuICAgIGFkZENvbnRyb2woa2V5OiBzdHJpbmcsIGNvbnRyb2w6IElDb250cm9sKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbHNba2V5XSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbnRyb2wgd2l0aCBrZXkgJHtrZXl9IGFscmVhZHkgZXhpc3RzYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzW2tleV0gPSBjb250cm9sO1xyXG5cclxuICAgICAgICB0aGlzLm1hcC5hZGRDb250cm9sKGNvbnRyb2wuZ2V0Q29udHJvbCgpKVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnQWRkZWQgY29udHJvbCcsIGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TWFya2VyRmlsdGVyKGZpbHRlcjogKHBsYWNlOiBOYm5QbGFjZSkgPT4gYm9vbGVhbikge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubWFya2VyTGF5ZXIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNYXJrZXIgTGF5ZXIgbm90IHNldCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tYXJrZXJGaWx0ZXIgPSBmaWx0ZXI7XHJcbiAgICAgICAgdGhpcy5tYXJrZXJMYXllci5yZWZyZXNoTWFya2Vyc0luc2lkZUJvdW5kcyh0aGlzLm1hcC5nZXRCb3VuZHMoKSwgdGhpcy5tYXJrZXJGaWx0ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qcHJpdmF0ZSBzZXRNYXJrZXJMYXllcihtYXJrZXJMYXllcjogSU1hcmtlckxheWVyKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1hcmtlckxheWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFya2VyTGF5ZXIucmVtb3ZlQWxsTWFya2VycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tYXJrZXJMYXllciA9IG1hcmtlckxheWVyO1xyXG4gICAgICAgIHRoaXMubWFya2VyTGF5ZXIuc2V0TWFwKHRoaXMubWFwKTtcclxuICAgICAgICB0aGlzLm1hcmtlckxheWVyLnNldERhdGFzdG9yZSh0aGlzLmRhdGFzdG9yZSk7XHJcblxyXG4gICAgICAgIHRoaXMubWFya2VyTGF5ZXIucmVmcmVzaE1hcmtlcnNJbnNpZGVCb3VuZHMoXHJcbiAgICAgICAgICAgIHRoaXMubWFwLmdldEJvdW5kcygpLCB0aGlzLm1hcmtlckZpbHRlclxyXG4gICAgICAgICk7XHJcbiAgICB9Ki9cclxuXHJcbiAgICBzZXRNb2RlSGFuZGxlcihtb2RlSGFuZGxlcjogSU1vZGUpIHtcclxuICAgICAgICB0aGlzLm1vZGVIYW5kbGVyID0gbW9kZUhhbmRsZXI7XHJcbiAgICAgICAgdGhpcy5tYXJrZXJMYXllcj8uc2V0TW9kZUhhbmRsZXIobW9kZUhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCAqIGFzIEwgZnJvbSAnbGVhZmxldCc7XHJcbmltcG9ydCBJQ29udHJvbCBmcm9tIFwiLi4vaW50ZXJmYWNlcy9jb250cm9sLmludGVyZmFjZVwiO1xyXG5pbXBvcnQgTmJuVGVjaE1hcCBmcm9tIFwiLi4vbmJuX3RlY2hfbWFwLmNsYXNzXCI7XHJcbmltcG9ydCB7IENvbnRyb2xFdmVudCB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIEFDb250cm9sIGltcGxlbWVudHMgSUNvbnRyb2wge1xyXG5cclxuICAgIC8vcHJvdGVjdGVkIG1hcDogTmJuVGVjaE1hcDtcclxuICAgIHByb3RlY3RlZCBjb250cm9sOiBMLkNvbnRyb2w7XHJcbiAgICAvL3Byb3RlY3RlZCBrZXk6IHN0cmluZztcclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIGV2ZW50SGFuZGxlcnM6IHtcclxuICAgICAgICBbZXZlbnROYW1lOiBzdHJpbmddOiAoKGU6IENvbnRyb2xFdmVudCkgPT4gdm9pZClbXVxyXG4gICAgfSA9IHt9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKC8qa2V5OiBzdHJpbmcvKiwgbmJuVGVjaE1hcDogTmJuVGVjaE1hcCovKSB7XHJcbiAgICAgICAgLy90aGlzLmtleSA9IGtleTtcclxuICAgICAgICAvL3RoaXMubWFwID0gbmJuVGVjaE1hcDtcclxuICAgICAgICB0aGlzLmNvbnRyb2wgPSBuZXcgTC5Db250cm9sKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiAoZTogQ29udHJvbEV2ZW50KSA9PiB2b2lkKSA6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGVtaXQoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IGFueSkgOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmRlYnVnKGBFbWl0dGluZyBldmVudDogJHtldmVudE5hbWV9YCwge1xyXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICBoYW5kbGVyczogdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBldmVudE5hbWUsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy5nZXRTdGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IGdldFN0YXRlKCkgOiBhbnk7XHJcblxyXG4gICAgcHVibGljIGdldENvbnRyb2woKSA6IEwuQ29udHJvbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbDtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgKiBhcyBMIGZyb20gJ2xlYWZsZXQnO1xyXG4vL2ltcG9ydCBOYm5UZWNoTWFwIGZyb20gXCIuLi9uYm5fdGVjaF9tYXAuY2xhc3NcIjtcclxuaW1wb3J0IEFDb250cm9sIGZyb20gXCIuL2NvbnRyb2wuYWJzdHJhY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb0Rpc3BsYXlNb2RlIGV4dGVuZHMgQUNvbnRyb2wge1xyXG5cclxuICAgIHByaXZhdGUgZGlzcGxheU1vZGUgPSAnYWxsJztcclxuICAgIHByaXZhdGUgZWxDb250cm9sRGl2OiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcHJpdmF0ZSBlbERyb3Bkb3duOiBIVE1MU2VsZWN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ29udHJvbERpdigpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbC5vbkFkZCA9IChtYXA6IEwuTWFwKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVEcm9wZG93bigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbENvbnRyb2xEaXY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3RoaXMuY29udHJvbC5vbkFkZCA9ICgpID0+IHRoaXMuYWRkQ29udHJvbERpdigpO1xyXG4gICAgICAgIC8vdGhpcy5zaG93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3RhdGUoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheU1vZGU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgYWxsTGFiZWw6IGFueSA9IG51bGw7XHJcbiAgICBwcml2YXRlIGFsbFJhZGlvOiBhbnkgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBhbGxUZXh0OiBhbnkgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSB1cGdyYWRlTGFiZWw6IGFueSA9IG51bGw7XHJcbiAgICBwcml2YXRlIHVwZ3JhZGVSYWRpbzogYW55ID0gbnVsbDtcclxuICAgIHByaXZhdGUgdXBncmFkZVRleHQ6IGFueSA9IG51bGw7XHJcbiAgICBwcml2YXRlIGVlTGFiZWw6IGFueSA9IG51bGw7XHJcbiAgICBwcml2YXRlIGVlUmFkaW86IGFueSA9IG51bGw7XHJcbiAgICBwcml2YXRlIGVlVGV4dDogYW55ID0gbnVsbDtcclxuICAgIFxyXG4gICAgY2hhbmdlTW9kZShtb2RlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmRpc3BsYXlNb2RlID0gbW9kZTtcclxuICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIG1vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2VuZXJhdGVDb250cm9sRGl2KCkgOiB2b2lkIHtcclxuICAgICAgICBpZih0aGlzLmVsQ29udHJvbERpdikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvbnRyb2xEaXYgYWxyZWFkeSBleGlzdHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZWxDb250cm9sRGl2LmNsYXNzTGlzdC5hZGQoJ2luZm8nLCAnbGVnZW5kJyk7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUub3BhY2l0eSA9IFwiMC44XCI7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUucGFkZGluZyA9IFwiNXB4XCI7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1cHhcIjtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZURyb3Bkb3duKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5lbERyb3Bkb3duKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRHJvcGRvd24gYWxyZWFkeSBleGlzdHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRyb3Bkb3duID0gdGhpcy5lbERyb3Bkb3duO1xyXG4gICAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ2NvbnRyb2wtc2VsZWN0Jyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFsbE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGFsbE9wdGlvbi52YWx1ZSA9ICdhbGwnO1xyXG4gICAgICAgIGFsbE9wdGlvbi5pbm5lclRleHQgPSAnU2hvdyBBbGwgTG9jYXRpb25zJztcclxuICAgICAgICBkcm9wZG93bi5hcHBlbmRDaGlsZChhbGxPcHRpb24pO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgIGNvbnN0IHVwZ3JhZGVPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICB1cGdyYWRlT3B0aW9uLnZhbHVlID0gJ3VwZ3JhZGUnO1xyXG4gICAgICAgIHVwZ3JhZGVPcHRpb24uaW5uZXJUZXh0ID0gJ1RlY2ggVXBncmFkZXMnO1xyXG4gICAgICAgIGRyb3Bkb3duLmFwcGVuZENoaWxkKHVwZ3JhZGVPcHRpb24pO1xyXG5cclxuICAgICAgICBjb25zdCBlZU9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGVlT3B0aW9uLnZhbHVlID0gJ2VlJztcclxuICAgICAgICBlZU9wdGlvbi5pbm5lclRleHQgPSAnRW50ZXJwcmlzZSBFdGhlcm5ldCc7XHJcbiAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoZWVPcHRpb24pO1xyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIGRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB0aGlzLmNoYW5nZU1vZGUoKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmVsRHJvcGRvd24gPSBkcm9wZG93bjtcclxuICAgICAgICB0aGlzLmVsQ29udHJvbERpdi5hcHBlbmRDaGlsZChkcm9wZG93bik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qYWRkQ29udHJvbERpdigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5hbGxMYWJlbCA9IEwuRG9tVXRpbC5jcmVhdGUoJ2xhYmVsJywgJ2NvbnRyb2wtbGFiZWwnLCB0aGlzLmNvbnRyb2xEaXYpO1xyXG4gICAgICAgIHRoaXMuYWxsUmFkaW8gPSBMLkRvbVV0aWwuY3JlYXRlKCdpbnB1dCcsICdjb250cm9sLWlucHV0JywgdGhpcy5hbGxMYWJlbCk7XHJcbiAgICAgICAgdGhpcy5hbGxSYWRpby50eXBlID0gJ3JhZGlvJztcclxuICAgICAgICB0aGlzLmFsbFJhZGlvLm5hbWUgPSAnZGlzcGxheS1tb2RlJztcclxuICAgICAgICB0aGlzLmFsbFJhZGlvLnZhbHVlID0gJ2FsbCc7XHJcbiAgICAgICAgdGhpcy5hbGxSYWRpby5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICBMLkRvbUV2ZW50Lm9uKHRoaXMuYWxsUmFkaW8sICdjaGFuZ2UnLCAoZSkgPT4gdGhpcy5jaGFuZ2VNb2RlKCdhbGwnKSk7XHJcbiAgICAgICAgdGhpcy5hbGxUZXh0ID0gTC5Eb21VdGlsLmNyZWF0ZSgnc3BhbicsICdjb250cm9sLXRleHQnLCB0aGlzLmFsbExhYmVsKTtcclxuICAgICAgICB0aGlzLmFsbFRleHQuaW5uZXJUZXh0ID0gJ0FsbCc7XHJcblxyXG4gICAgICAgIHRoaXMudXBncmFkZUxhYmVsID0gTC5Eb21VdGlsLmNyZWF0ZSgnbGFiZWwnLCAnY29udHJvbC1sYWJlbCcsIHRoaXMuY29udHJvbERpdik7XHJcbiAgICAgICAgdGhpcy51cGdyYWRlUmFkaW8gPSBMLkRvbVV0aWwuY3JlYXRlKCdpbnB1dCcsICdjb250cm9sLWlucHV0JywgdGhpcy51cGdyYWRlTGFiZWwpO1xyXG4gICAgICAgIHRoaXMudXBncmFkZVJhZGlvLnR5cGUgPSAncmFkaW8nO1xyXG4gICAgICAgIHRoaXMudXBncmFkZVJhZGlvLm5hbWUgPSAnZGlzcGxheS1tb2RlJztcclxuICAgICAgICB0aGlzLnVwZ3JhZGVSYWRpby52YWx1ZSA9ICd1cGdyYWRlJztcclxuICAgICAgICBMLkRvbUV2ZW50Lm9uKHRoaXMudXBncmFkZVJhZGlvLCAnY2hhbmdlJywgKCkgPT4gdGhpcy5jaGFuZ2VNb2RlKCd1cGdyYWRlJykpO1xyXG4gICAgICAgIHRoaXMudXBncmFkZVRleHQgPSBMLkRvbVV0aWwuY3JlYXRlKCdzcGFuJywgJ2NvbnRyb2wtdGV4dCcsIHRoaXMudXBncmFkZUxhYmVsKTtcclxuICAgICAgICB0aGlzLnVwZ3JhZGVUZXh0LmlubmVyVGV4dCA9ICdUZWNoIFVwZ3JhZGUnO1xyXG5cclxuICAgICAgICB0aGlzLmVlTGFiZWwgPSBMLkRvbVV0aWwuY3JlYXRlKCdsYWJlbCcsICdjb250cm9sLWxhYmVsJywgdGhpcy5jb250cm9sRGl2KTtcclxuICAgICAgICB0aGlzLmVlUmFkaW8gPSBMLkRvbVV0aWwuY3JlYXRlKCdpbnB1dCcsICdjb250cm9sLWlucHV0JywgdGhpcy5lZUxhYmVsKTtcclxuICAgICAgICB0aGlzLmVlUmFkaW8udHlwZSA9ICdyYWRpbyc7XHJcbiAgICAgICAgdGhpcy5lZVJhZGlvLm5hbWUgPSAnZGlzcGxheS1tb2RlJztcclxuICAgICAgICB0aGlzLmVlUmFkaW8udmFsdWUgPSAnZWUnO1xyXG4gICAgICAgIEwuRG9tRXZlbnQub24odGhpcy5lZVJhZGlvLCAnY2hhbmdlJywgKCkgPT4gdGhpcy5jaGFuZ2VNb2RlKCdlZScpKTtcclxuICAgICAgICB0aGlzLmVlVGV4dCA9IEwuRG9tVXRpbC5jcmVhdGUoJ3NwYW4nLCAnY29udHJvbC10ZXh0JywgdGhpcy5lZUxhYmVsKTtcclxuICAgICAgICB0aGlzLmVlVGV4dC5pbm5lclRleHQgPSAnRUUnO1xyXG5cclxuICAgIH0qL1xyXG5cclxufSIsImltcG9ydCAqIGFzIEwgZnJvbSAnbGVhZmxldCc7XHJcbmltcG9ydCB7IExhdExuZ0xvY2lkU3RvcmFnZSwgTmJuUGxhY2UsIE5iblBsYWNlU3RvcmUsIFBvaW50QW5kTG9jaWRzLCBQb2ludEFuZFBsYWNlcyB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgSURhdGFzdG9yZSBmcm9tICcuLi9pbnRlcmZhY2VzL2RhdGFzdG9yZS5pbnRlcmZhY2UnO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBNZW1vcnlEYXRhc3RvcmUgaW1wbGVtZW50cyBJRGF0YXN0b3JlIHtcclxuXHJcbiAgICBwcml2YXRlIGxhdExuZ0luZGV4OiBMYXRMbmdMb2NpZFN0b3JhZ2UgPSB7fTtcclxuICAgIHByaXZhdGUgbmJuUGxhY2VTdG9yZTogTmJuUGxhY2VTdG9yZSA9IHt9O1xyXG5cclxuICAgIGlzUmVhZHkoKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcmUgcGxhY2UgbWFya2VycyBcclxuICAgICAqIEBwYXJhbSBwbGFjZU1hcmtlciBcclxuICAgICAqL1xyXG4gICAgYXN5bmMgc3RvcmVQbGFjZShwbGFjZTogTmJuUGxhY2UpIDogUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGxhdGl0dWRlID0gcGxhY2UubGF0aXR1ZGU7XHJcbiAgICAgICAgY29uc3QgbG9uZ2l0dWRlID0gcGxhY2UubG9uZ2l0dWRlO1xyXG4gICAgICAgIGNvbnN0IGxhdExuZyA9IGAke2xhdGl0dWRlfSwke2xvbmdpdHVkZX1gO1xyXG4gICAgICAgIGNvbnN0IGxvY2lkID0gcGxhY2UubG9jaWQ7XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIExPQ0lEIGludG8gaW5kZXhcclxuICAgICAgICBpZiAoIXRoaXMubGF0TG5nSW5kZXhbbGF0TG5nXSkge1xyXG4gICAgICAgICAgICB0aGlzLmxhdExuZ0luZGV4W2xhdExuZ10gPSBbIGxvY2lkIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubGF0TG5nSW5kZXhbbGF0TG5nXS5pbmNsdWRlcyhsb2NpZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF0TG5nSW5kZXhbbGF0TG5nXS5wdXNoKGxvY2lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcmUgcGxhY2VcclxuICAgICAgICB0aGlzLm5iblBsYWNlU3RvcmVbbG9jaWRdID0gcGxhY2U7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHN0b3JlUGxhY2VzKHBsYWNlczogTmJuUGxhY2VbXSkgOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBwbGFjZXMuZm9yRWFjaChwbGFjZSA9PiB0aGlzLnN0b3JlUGxhY2UocGxhY2UpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRQbGFjZShsb2NpZDogc3RyaW5nKSA6IFByb21pc2U8TmJuUGxhY2U+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYm5QbGFjZVN0b3JlW2xvY2lkXTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRQbGFjZXMoKTogUHJvbWlzZTxOYm5QbGFjZVtdPiB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubmJuUGxhY2VTdG9yZSlcclxuICAgICAgICAgICAgLm1hcChsb2NpZCA9PiB0aGlzLm5iblBsYWNlU3RvcmVbbG9jaWRdKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRQb2ludHMoKSA6IFByb21pc2U8UG9pbnRBbmRMb2NpZHNbXT4ge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmxhdExuZ0luZGV4KVxyXG4gICAgICAgICAgICAubWFwKChsYXRMbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFsgbGF0aXR1ZGUsIGxvbmdpdHVkZSBdID0gbGF0TG5nLnNwbGl0KCcsJykubWFwKE51bWJlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGxuZzogbGF0TG5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlLCBsb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jaWRzOiB0aGlzLmxhdExuZ0luZGV4W2xhdExuZ10sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRQb2ludHNXaXRoaW5Cb3VuZHMoYm91bmRzOiBMLkxhdExuZ0JvdW5kcykgOiBQcm9taXNlPFBvaW50QW5kTG9jaWRzW10+IHtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSAoYXdhaXQgdGhpcy5nZXRQb2ludHMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcigoeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0pID0+IHRoaXMuaXNMYXRMbmdXaXRoaW5Cb3VuZHMobGF0aXR1ZGUsIGxvbmdpdHVkZSwgYm91bmRzKSlcclxuICAgICAgICByZXR1cm4gcG9pbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEZ1bGxQb2ludHNXaXRoaW5Cb3VuZHMoYm91bmRzOiBMLkxhdExuZ0JvdW5kcykgOiBQcm9taXNlPFBvaW50QW5kUGxhY2VzW10+IHtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSAoYXdhaXQgdGhpcy5nZXRQb2ludHMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcigoeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0pID0+IHRoaXMuaXNMYXRMbmdXaXRoaW5Cb3VuZHMobGF0aXR1ZGUsIGxvbmdpdHVkZSwgYm91bmRzKSlcclxuICAgICAgICAgICAgLm1hcCgoeyBsYXRsbmcsIGxhdGl0dWRlLCBsb25naXR1ZGUsIGxvY2lkcyB9KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgbGF0bG5nLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLFxyXG4gICAgICAgICAgICAgICAgcGxhY2VzOiBsb2NpZHMubWFwKGxvY2lkID0+IHRoaXMubmJuUGxhY2VTdG9yZVtsb2NpZF0pLFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICByZXR1cm4gcG9pbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFBsYWNlc0F0TGF0TG5nKGxhdGl0dWRlOiBudW1iZXIsIGxvbmdpdHVkZTogbnVtYmVyKSA6IFByb21pc2U8TmJuUGxhY2VbXT4ge1xyXG4gICAgICAgIGNvbnN0IGxhdExuZyA9IGAke2xhdGl0dWRlfSwke2xvbmdpdHVkZX1gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhdExuZ0luZGV4W2xhdExuZ11cclxuICAgICAgICAgICAgLm1hcChsb2NpZCA9PiB0aGlzLm5iblBsYWNlU3RvcmVbbG9jaWRdKVxyXG4gICAgICAgIDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzTGF0TG5nV2l0aGluQm91bmRzKGxhdGl0dWRlOiBudW1iZXIsIGxvbmdpdHVkZTogbnVtYmVyLCBib3VuZHM6IEwuTGF0TG5nQm91bmRzKSB7XHJcbiAgICAgICAgcmV0dXJuIGxhdGl0dWRlID4gYm91bmRzLmdldFNvdXRoKClcclxuICAgICAgICAgICAgJiYgbGF0aXR1ZGUgPCBib3VuZHMuZ2V0Tm9ydGgoKVxyXG4gICAgICAgICAgICAmJiBsb25naXR1ZGUgPiBib3VuZHMuZ2V0V2VzdCgpXHJcbiAgICAgICAgICAgICYmIGxvbmdpdHVkZSA8IGJvdW5kcy5nZXRFYXN0KClcclxuICAgICAgICA7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IElNb2RlIGZyb20gXCIuLi9pbnRlcmZhY2VzL21vZGUuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IExlZ2VuZEl0ZW0sIE5iblBsYWNlLCBQb2ludEFuZFBsYWNlcyB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgKiBhcyBMIGZyb20gXCJsZWFmbGV0XCI7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaXNQbGFjZUZUVFAsXHJcbiAgICBpc1BsYWNlRlRUQyxcclxuICAgIGlzUGxhY2VGVFRQQXZhaWwsXHJcbiAgICBpc1BsYWNlRlRUUFNvb24sXHJcbiAgICBpc1BsYWNlRlRUUEZhcixcclxuICAgIGlzRnd0b0ZUVEMsXHJcbiAgICBpc0Z3dG9GVFROLFxyXG4gICAgaXNTYXRUb0ZXLFxyXG4gICAgaXNEZWJ1Z01vZGVcclxufSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuXHJcbmNvbnN0IGNvbG91ckZUVFAgXHRcdD0gJyMxRDcwNDQnO1xyXG5jb25zdCBjb2xvdXJGVFRQQXZhaWwgICA9ICcjNzVBRDZGJztcclxuY29uc3QgY29sb3VyRlRUUFNvb24gICAgPSAnI0M4RTNDNSc7XHJcbmNvbnN0IGNvbG91ckhGQyBcdFx0PSAnI0ZGQkUwMCc7XHJcbmNvbnN0IGNvbG91ckZUVEMgXHRcdD0gJyNGRjdFMDEnO1xyXG5jb25zdCBjb2xvdXJGVFRDQXZhaWwgICA9ICcjRkY3RTAxJztcclxuY29uc3QgY29sb3VyRlRUTkIgXHRcdD0gJyNFMzA3MUQnO1xyXG5jb25zdCBjb2xvdXJGVyBcdFx0ICAgID0gJyMwMkI5RTMnO1xyXG5jb25zdCBjb2xvdXJGV0F2YWlsIFx0PSAnIzAyMkJFMyc7XHJcbmNvbnN0IGNvbG91clNhdCBcdCAgICA9ICcjNkIwMkUzJztcclxuY29uc3QgY29sb3VyVW5rbm93biAgICAgID0gJyM4ODg4ODgnO1xyXG5cclxuZnVuY3Rpb24gZ2V0VGVjaENvbG91cih0ZWNoVHlwZTogc3RyaW5nKSB7XHJcbiAgICBzd2l0Y2godGVjaFR5cGUpIHtcclxuICAgICAgICBjYXNlICdGVFRQJzogcmV0dXJuIGNvbG91ckZUVFA7XHJcbiAgICAgICAgY2FzZSAnRlRUQyc6IHJldHVybiBjb2xvdXJGVFRDO1xyXG4gICAgICAgIGNhc2UgJ0ZUVE4nOlxyXG4gICAgICAgIGNhc2UgJ0ZUVEInOiByZXR1cm4gY29sb3VyRlRUTkI7XHJcbiAgICAgICAgY2FzZSAnSEZDJzogcmV0dXJuIGNvbG91ckhGQztcclxuICAgICAgICBjYXNlICdXSVJFTEVTUyc6IHJldHVybiBjb2xvdXJGVztcclxuICAgICAgICBjYXNlICdTQVRFTExJVEUnOiByZXR1cm4gY29sb3VyU2F0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbG91clVua25vd247XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsbE1vZGUgaW1wbGVtZW50cyBJTW9kZSB7XHJcblxyXG4gICAgZmlsdGVyKHBsYWNlOiBOYm5QbGFjZSkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwb2ludENvbG91cihwb2ludDogUG9pbnRBbmRQbGFjZXMpIDogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbGFjZUNvbG91cihwb2ludC5wbGFjZXNbMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBsYWNlQ29sb3VyKHBsYWNlOiBOYm5QbGFjZSkgOiBzdHJpbmcge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc1BsYWNlRlRUUChwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG91ckZUVFA7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGlzUGxhY2VGVFRQQXZhaWwocGxhY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvdXJGVFRQQXZhaWw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGlzUGxhY2VGVFRQU29vbihwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG91ckZUVFBTb29uO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmIChpc1BsYWNlRlRUUEZhcihwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFRlY2hDb2xvdXIocGxhY2UudGVjaFR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmIChpc1BsYWNlRlRUQyhwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG91ckZUVEM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGlzRnd0b0ZUVEMocGxhY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvdXJGVFRDQXZhaWw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGlzRnd0b0ZUVE4ocGxhY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvdXJGVFROQjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzU2F0VG9GVyhwbGFjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG91ckZXQXZhaWw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKHBsYWNlLmFsdFJlYXNvbkNvZGUgJiYgcGxhY2UuYWx0UmVhc29uQ29kZSAhPSAnTlVMTF9OQScpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocGxhY2UpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBnZXRUZWNoQ29sb3VyKHBsYWNlLnRlY2hUeXBlKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyUG9wdXBDb250ZW50KHBsYWNlOiBOYm5QbGFjZSkgOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicpO1xyXG5cclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8Yj4nK3BsYWNlLmxvY2lkKyc8L2I+PC9icj4nXHJcbiAgICAgICAgICAgICsgcGxhY2UuYWRkcmVzczEgKyAnPC9icj4nXHJcbiAgICAgICAgICAgICsgcGxhY2UuYWRkcmVzczIgKyAnPC9icj4nXHJcbiAgICAgICAgICAgICsgJzxiciAvPic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICs9ICc8Yj5UZWNobm9sb2d5IFBsYW48L2I+PC9icj4nO1xyXG5cclxuICAgICAgICAvKiogVGVjaG5vbG9neSBQbGFuIEZpbmFsIFN0YXRlICovXHJcbiAgICAgICAgaWYgKHBsYWNlLnRlY2hUeXBlID09ICdGVFRQJ1xyXG4gICAgICAgICAgICB8fCAhcGxhY2UuYWx0UmVhc29uQ29kZVxyXG4gICAgICAgICAgICB8fCBwbGFjZS5hbHRSZWFzb25Db2RlID09ICdOVUxMX05BJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCArPSAnVGVjaG5vbG9neTogJyArIHBsYWNlLnRlY2hUeXBlICsgJzxiciAvPic7XHJcbiAgICAgICAgICAgIGlmIChwbGFjZS50ZWNoVHlwZSAhPSAnRlRUUCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICs9ICdObyB0ZWNoIHVwZ3JhZGUgcGxhbm5lZDxiciAvPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGVsc2UgaWYgKHBsYWNlLmFsdFJlYXNvbkNvZGUgJiYgcGxhY2UuYWx0UmVhc29uQ29kZS5tYXRjaCgvXkZUVFAvKSkge1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCArPSAnQ3VycmVudDogJyArIHBsYWNlLnRlY2hUeXBlICsgJzxiciAvPic7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICs9ICdDaGFuZ2U6ICcgKyBwbGFjZS5hbHRSZWFzb25Db2RlICsgJzxiciAvPic7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICs9ICdTdGF0dXM6ICcgKyBwbGFjZS50ZWNoQ2hhbmdlU3RhdHVzICsgJzxiciAvPic7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICs9ICdQcm9ncmFtOiAnICsgcGxhY2UucHJvZ3JhbVR5cGUgKyAnPGJyIC8+JztcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgKz0gJ1RhcmdldCBRdHI6ICcgKyBwbGFjZS50YXJnZXRFbGlnaWJpbGl0eVF1YXJ0ZXIgKyAnPGJyIC8+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICs9ICdDdXJyZW50OiAnICsgcGxhY2UudGVjaFR5cGUgKyAnPGJyIC8+JztcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgKz0gJ0NoYW5nZTogJyArIHBsYWNlLmFsdFJlYXNvbkNvZGUgKyAnPGJyIC8+JztcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgKz0gJ1N0YXR1czogJyArIHBsYWNlLnRlY2hDaGFuZ2VTdGF0dXMgKyAnPGJyIC8+JztcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgKz0gJ1Byb2dyYW06ICcgKyBwbGFjZS5wcm9ncmFtVHlwZSArICc8YnIgLz4nO1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCArPSAnVGFyZ2V0IFF0cjogJyArIHBsYWNlLnRhcmdldEVsaWdpYmlsaXR5UXVhcnRlciArICc8YnIgLz4nO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICs9ICc8YnIgLz4nOyBcclxuICAgICAgICBcclxuICAgICAgICBpZiAocGxhY2UuZWUpIHtcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgICs9ICc8Yj5FbnRlcnByaXNlIEV0aGVybmV0PC9iPjwvYnI+JztcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgICs9ICdQcmljZSBab25lOiAnICsgKCBwbGFjZS5jYmRwcmljaW5nID8gJ0NCRCcgOiAnWm9uZSAxLzIvMycgKSArICc8YnIgLz4nXHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MICArPSAnQnVpbGQgQ29zdDogJyArICggcGxhY2UuemVyb0J1aWxkQ29zdCA/ICckMCcgOiAnUE9BJyApICsgJzxiciAvPidcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgICs9ICc8YnIgLz4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzRGVidWdNb2RlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgaHIgPSBMLkRvbVV0aWwuY3JlYXRlKCdocicpO1xyXG4gICAgICAgICAgICBjb25zdCBwcmUgPSBMLkRvbVV0aWwuY3JlYXRlKCdwcmUnKTtcclxuICAgICAgICAgICAgcHJlLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHBsYWNlLCBudWxsLCAyKTtcclxuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChocik7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclRvb2x0aXAocGxhY2VzOiBOYm5QbGFjZVtdKSA6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGxhYmVsID0gcGxhY2VzWzBdLmFkZHJlc3MxO1xyXG5cclxuICAgICAgICBpZiAocGxhY2VzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgbGFiZWwgKz0gJyAoICsgJyArIChwbGFjZXMubGVuZ3RoIC0gMSkgKyAnIG1vcmUpJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsYWJlbDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGVnZW5kSXRlbXMoKTogTGVnZW5kSXRlbVtdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0ZUVFAnLFxyXG4gICAgICAgICAgICAgICAgY29sb3VyOiBjb2xvdXJGVFRQLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0ZUVFAgVXBncmFkZScsXHJcbiAgICAgICAgICAgICAgICBjb2xvdXI6IGNvbG91ckZUVFBBdmFpbCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdGVFRQIFVwZ3JhZGUgU29vbicsXHJcbiAgICAgICAgICAgICAgICBjb2xvdXI6IGNvbG91ckZUVFBTb29uLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0hGQycsXHJcbiAgICAgICAgICAgICAgICBjb2xvdXI6IGNvbG91ckhGQyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdGVFRDJyxcclxuICAgICAgICAgICAgICAgIGNvbG91cjogY29sb3VyRlRUQyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdGVFROL0ZUVEInLFxyXG4gICAgICAgICAgICAgICAgY29sb3VyOiBjb2xvdXJGVFROQixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdGVycsXHJcbiAgICAgICAgICAgICAgICBjb2xvdXI6IGNvbG91ckZXLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0ZXIFVwZ3JhZGUnLFxyXG4gICAgICAgICAgICAgICAgY29sb3VyOiBjb2xvdXJGV0F2YWlsLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1NhdGVsbGl0ZScsXHJcbiAgICAgICAgICAgICAgICBjb2xvdXI6IGNvbG91clNhdCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdVbmtub3duJyxcclxuICAgICAgICAgICAgICAgIGNvbG91cjogY29sb3VyVW5rbm93bixcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IElNb2RlIGZyb20gXCIuLi9pbnRlcmZhY2VzL21vZGUuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IExlZ2VuZEl0ZW0gfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IEFDb250cm9sIGZyb20gXCIuL2NvbnRyb2wuYWJzdHJhY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xMZWdlbmQgZXh0ZW5kcyBBQ29udHJvbCB7XHJcblxyXG4gICAgcHJpdmF0ZSBlbENvbnRyb2xEaXY6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRyb2wuc2V0UG9zaXRpb24oJ2JvdHRvbXJpZ2h0Jyk7XHJcblxyXG4gICAgICAgIHRoaXMuZWxDb250cm9sRGl2LmNsYXNzTGlzdC5hZGQoJ2luZm8nLCAnbGVnZW5kJyk7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUub3BhY2l0eSA9IFwiMC44XCI7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUucGFkZGluZyA9IFwiNXB4XCI7XHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1cHhcIjtcclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9sLm9uQWRkID0gKG1hcDogTC5NYXApID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxDb250cm9sRGl2O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxlZ2VuZChpdGVtczogTGVnZW5kSXRlbVtdKSB7XHJcblxyXG4gICAgICAgIGxldCBodG1sID0gJyc7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaHRtbCArPSAnPHN2ZyBoZWlnaHQ9XCIxMFwiIHdpZHRoPVwiMTBcIj48Y2lyY2xlIGN4PVwiNVwiIGN5PVwiNVwiIHI9XCI1XCIgZmlsbD1cIicrIGl0ZW0uY29sb3VyICsnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+ICcgKyBpdGVtLmxhYmVsO1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5jb3VudCkge1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnICgnICsgaXRlbS5jb3VudCArICcpJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodG1sICs9ICc8YnI+JztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbENvbnRyb2xEaXYuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgLypcclxuXHJcbiAgICBnZXRMZWdlbmRIVE1MKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5uYm5UZWNoTWFwLmNvbnRyb2xzLmRpc3BsYXlNb2RlPy5kaXNwbGF5TW9kZSA9PSAnZWUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnPHN2ZyBoZWlnaHQ9XCIxMFwiIHdpZHRoPVwiMTBcIj48Y2lyY2xlIGN4PVwiNVwiIGN5PVwiNVwiIHI9XCI1XCIgZmlsbD1cIicrY29sb3VyRUVfQ0JEX1pCQysnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IFpvbmUgQ0JEICgkMCBCdWlsZCk8YnI+J1xyXG4gICAgICAgICAgICArICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJytjb2xvdXJFRV9DQkRfQkMrJ1wiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIxXCIgb3BhY2l0eT1cIjFcIiBmaWxsLW9wYWNpdHk9XCIwLjhcIiAvPjwvc3ZnPiBab25lIENCRCAoQnVpbGQgUE9BKTxicj4nXHJcbiAgICAgICAgICAgICsgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInK2NvbG91ckVFX1oxMjNfWkJDKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gWm9uZSAxLzIvMyAoJDAgQnVpbGQpPGJyPidcclxuICAgICAgICAgICAgKyAnPHN2ZyBoZWlnaHQ9XCIxMFwiIHdpZHRoPVwiMTBcIj48Y2lyY2xlIGN4PVwiNVwiIGN5PVwiNVwiIHI9XCI1XCIgZmlsbD1cIicrY29sb3VyRUVfWjEyM19CQysnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IFpvbmUgMS8yLzMgKEJ1aWxkIFBPQSk8YnI+J1xyXG4gICAgICAgICAgICArICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJytjb2xvdXJVbmtub3duKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gVW5rbm93bic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5uYm5UZWNoTWFwLmNvbnRyb2xzLmRpc3BsYXlNb2RlPy5kaXNwbGF5TW9kZSA9PSAndXBncmFkZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJysgQ09MX1RFQ0hfQ09NUExFVEUgKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gQ29tcGxldGVkPGJyPidcclxuICAgICAgICAgICAgKyAnPHN2ZyBoZWlnaHQ9XCIxMFwiIHdpZHRoPVwiMTBcIj48Y2lyY2xlIGN4PVwiNVwiIGN5PVwiNVwiIHI9XCI1XCIgZmlsbD1cIicrIENPTF9URUNIX0FWQUlMICsnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IEF2YWlsYWJsZTxicj4nXHJcbiAgICAgICAgICAgICsgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInKyBDT0xfVEVDSF9CVUlMREZJTkFMSVNFRCArJ1wiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIxXCIgb3BhY2l0eT1cIjFcIiBmaWxsLW9wYWNpdHk9XCIwLjhcIiAvPjwvc3ZnPiBCdWlsZCBGaW5hbGlzZWQ8YnI+J1xyXG4gICAgICAgICAgICArICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJysgQ09MX1RFQ0hfREVTSUdOICsnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IEluIERlc2lnbjxicj4nXHJcbiAgICAgICAgICAgICsgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInKyBDT0xfVEVDSF9DT01NSVRURUQgKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gQ29tbWl0dGVkPGJyPidcclxuICAgICAgICAgICAgKyAnPGI+TXVsdGkgRHdlbGxpbmcgVW5pdHM8L2I+PGJyPidcclxuICAgICAgICAgICAgKyAnPHN2ZyBoZWlnaHQ9XCIxMFwiIHdpZHRoPVwiMTBcIj48Y2lyY2xlIGN4PVwiNVwiIGN5PVwiNVwiIHI9XCI1XCIgZmlsbD1cIicrIENPTF9URUNIX01EVV9JTkJVSUxEICsnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IEluIEJ1aWxkPGJyPidcclxuICAgICAgICAgICAgKyAnPHN2ZyBoZWlnaHQ9XCIxMFwiIHdpZHRoPVwiMTBcIj48Y2lyY2xlIGN4PVwiNVwiIGN5PVwiNVwiIHI9XCI1XCIgZmlsbD1cIicrIENPTF9URUNIX01EVV9FTElHSUJMRSArJ1wiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIxXCIgb3BhY2l0eT1cIjFcIiBmaWxsLW9wYWNpdHk9XCIwLjhcIiAvPjwvc3ZnPiBFbGxpZ2libGU8YnI+J1xyXG4gICAgICAgICAgICArICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJytjb2xvdXJVbmtub3duKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gVW5rbm93bic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInK2NvbG91ckZUVFArJ1wiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIxXCIgb3BhY2l0eT1cIjFcIiBmaWxsLW9wYWNpdHk9XCIwLjhcIiAvPjwvc3ZnPiBGVFRQPGJyPicgKyBcclxuICAgICAgICAgICAgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInK2NvbG91ckZUVFBBdmFpbCsnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IEZUVFAgVXBncmFkZTxicj4nICtcclxuICAgICAgICAgICAgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInK2NvbG91ckZUVFBTb29uKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gRlRUUCBVcGdyYWRlIFNvb248YnI+JyArXHJcbiAgICAgICAgICAgICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJytjb2xvdXJIRkMrJ1wiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIxXCIgb3BhY2l0eT1cIjFcIiBmaWxsLW9wYWNpdHk9XCIwLjhcIiAvPjwvc3ZnPiBIRkM8YnI+JyArIFxyXG4gICAgICAgICAgICAnPHN2ZyBoZWlnaHQ9XCIxMFwiIHdpZHRoPVwiMTBcIj48Y2lyY2xlIGN4PVwiNVwiIGN5PVwiNVwiIHI9XCI1XCIgZmlsbD1cIicrY29sb3VyRlRUQysnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IEZUVEM8YnI+JyArXHJcbiAgICAgICAgICAgICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJytjb2xvdXJGVFROQisnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IEZUVE4vRlRUQjxicj4nICtcclxuICAgICAgICAgICAgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInK2NvbG91ckZXKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gRlc8YnI+JyArXHJcbiAgICAgICAgICAgICc8c3ZnIGhlaWdodD1cIjEwXCIgd2lkdGg9XCIxMFwiPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCI1XCIgcj1cIjVcIiBmaWxsPVwiJytjb2xvdXJGV0F2YWlsKydcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIG9wYWNpdHk9XCIxXCIgZmlsbC1vcGFjaXR5PVwiMC44XCIgLz48L3N2Zz4gRlcgVXBncmFkZTxicj4nICtcclxuICAgICAgICAgICAgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInK2NvbG91clNhdCsnXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjFcIiBvcGFjaXR5PVwiMVwiIGZpbGwtb3BhY2l0eT1cIjAuOFwiIC8+PC9zdmc+IFNhdGVsbGl0ZTxicj4nICtcclxuICAgICAgICAgICAgJzxzdmcgaGVpZ2h0PVwiMTBcIiB3aWR0aD1cIjEwXCI+PGNpcmNsZSBjeD1cIjVcIiBjeT1cIjVcIiByPVwiNVwiIGZpbGw9XCInK2NvbG91clVua25vd24rJ1wiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIxXCIgb3BhY2l0eT1cIjFcIiBmaWxsLW9wYWNpdHk9XCIwLjhcIiAvPjwvc3ZnPiBVbmtub3duJztcclxuICAgIH1cclxuXHJcbiAgICBhZGRDb250cm9sRGl2KG1hcCkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuY29udHJvbERpdikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xEaXYgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCAnaW5mbyBsZWdlbmQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbERpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmZmZmZmZcIjtcclxuICAgICAgICB0aGlzLmNvbnRyb2xEaXYuc3R5bGUub3BhY2l0eSA9IFwiMC44XCI7XHJcbiAgICAgICAgdGhpcy5jb250cm9sRGl2LnN0eWxlLnBhZGRpbmcgPSBcIjVweFwiO1xyXG4gICAgICAgIHRoaXMuY29udHJvbERpdi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjVweFwiO1xyXG4gICAgICAgIHRoaXMuY29udHJvbERpdi5zdHlsZS53aWR0aCA9IFwiMTUwcHhcIjtcclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9sRGl2LmlubmVySFRNTCA9IHRoaXMuZ2V0TGVnZW5kSFRNTCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sRGl2O1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9sRGl2LmlubmVySFRNTCA9IHRoaXMuZ2V0TGVnZW5kSFRNTCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9sLmFkZFRvKHRoaXMubmJuVGVjaE1hcC5tYXApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2wucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgKi9cclxufSIsIi8qKlxyXG4gKiBAZmlsZSBNYWluIGVudHJ5IHBvaW50IGZvciBtYXAgc2NyaXB0cy5cclxuICogQG1vZHVsZSBpbmRleC50c1xyXG4gKiBAdmVyc2lvbiAxLjAuMFxyXG4gKiBAYXV0aG9yIEtvYWxhR1xyXG4gKiBAbGljZW5zZSBNSVRcclxuICovXHJcblxyXG5pbXBvcnQgeyBJbmRleERCRGF0YXN0b3JlIH0gZnJvbSBcIi4vZGF0YXN0b3JlL2RhdGFzdG9yZS5pbmRleGRiLmNsYXNzXCI7XHJcbmltcG9ydCBMaXBBcGkgZnJvbSBcIi4vYXBpL2xpcF9hcGkuY2xhc3NcIjtcclxuaW1wb3J0IE5iblRlY2hNYXAgZnJvbSBcIi4vbmJuX3RlY2hfbWFwLmNsYXNzXCI7XHJcbmltcG9ydCBDb250cm9EaXNwbGF5TW9kZSBmcm9tIFwiLi9jb250cm9scy9jb250cm9sX2Rpc3BsYXlfbW9kZS5jbGFzc1wiO1xyXG5pbXBvcnQgeyBOYm5QbGFjZSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7IE1lbW9yeURhdGFzdG9yZSB9IGZyb20gXCIuL2RhdGFzdG9yZS9kYXRhc3RvcmUubWVtb3J5LmNsYXNzXCI7XHJcbmltcG9ydCBNYXJrZXJMYXllckNsdXN0ZXIgZnJvbSBcIi4vY2xhc3Nlcy9tYXJrZXJsYXllci5jbHVzdGVyLmNsYXNzXCI7XHJcbmltcG9ydCBBbGxNb2RlIGZyb20gXCIuL21vZGVzL21vZGUuYWxsXCI7XHJcbmltcG9ydCBDb250cm9sTGVnZW5kIGZyb20gXCIuL2NvbnRyb2xzL2NvbnRyb2xfbGVnZW5kLmNsYXNzXCI7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uIHJlYWR5XHJcbiAqIEBkZXNjcmlwdGlvbiBFeGVjdXRlcyBhIGZ1bmN0aW9uIHdoZW4gdGhlIERPTSBpcyByZWFkeS5cclxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gLSBGdW5jdGlvbiB0byBleGVjdXRlLlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzk4OTk3MDEvMTI5MzI1Nn1cclxuICovXHJcbmZ1bmN0aW9uIHJlYWR5KGZuOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAvLyBzZWUgaWYgRE9NIGlzIGFscmVhZHkgYXZhaWxhYmxlXHJcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiaW50ZXJhY3RpdmVcIikge1xyXG4gICAgICAgIC8vIGNhbGwgb24gbmV4dCBhdmFpbGFibGUgdGlja1xyXG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmbik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEV4ZWN1dGUgd2hlbiBET00gaXMgcmVhZHkuXHJcbnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGNvbnN0IG1hcEFwaSA9IG5ldyBMaXBBcGkoKTtcclxuICAgIC8vY29uc3QgZGF0YXN0b3JlID0gbmV3IEluZGV4REJEYXRhc3RvcmUoKTtcclxuICAgIGNvbnN0IGRhdGFzdG9yZSA9IG5ldyBNZW1vcnlEYXRhc3RvcmUoKTtcclxuICAgIC8vY29uc3QgbWFya2VyTGF5ZXIgPSBuZXcgTWFya2VyTGF5ZXJDbHVzdGVyKCk7XHJcblxyXG4gICAgY29uc3QgbW9kZUFsbCA9IG5ldyBBbGxNb2RlKCk7XHJcblxyXG4gICAgbGV0IGRpc3BsYXlNb2RlID0gJ2FsbCc7XHJcblxyXG4gICAgY29uc3QgbmJuVGVjaE1hcCA9IG5ldyBOYm5UZWNoTWFwKHtcclxuICAgICAgICBtYXBDb250YWluZXJJZDogJ21hcCcsXHJcbiAgICAgICAgYXBpOiBtYXBBcGksXHJcbiAgICAgICAgZGF0YXN0b3JlOiBkYXRhc3RvcmUsXHJcbiAgICAgICAgLy9tYXJrZXJMYXllcjogbWFya2VyTGF5ZXIsXHJcbiAgICAgICAgZGVmYXVsdE1vZGVIYW5kbGVyOiBtb2RlQWxsXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIC8vIEFkZCBNYXJrZXJDb250cm9sbGVyXHJcbiAgICAvKlxyXG4gICAgbmJuVGVjaE1hcC5zZXRNYXJrZXJGaWx0ZXIoKHBsYWNlOiBOYm5QbGFjZSkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAoZGlzcGxheU1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYWxsJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBjYXNlICd1cGdyYWRlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBwbGFjZS5wcm9ncmFtVHlwZSAhPSBudWxsO1xyXG4gICAgICAgICAgICBjYXNlICdlZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxhY2UuZWU7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTsqL1xyXG5cclxuICAgIC8vIEFkZCBjb250cm9sc1xyXG5cclxuICAgIC8vIERpc3BsYXkgTW9kZSBDb250cm9sXHJcbiAgICBjb25zdCBjRGlzcGxheU1vZGUgPSBuZXcgQ29udHJvRGlzcGxheU1vZGUoKTtcclxuICAgIG5iblRlY2hNYXAuYWRkQ29udHJvbCgnZGlzcGxheW1vZGUnLCBjRGlzcGxheU1vZGUpO1xyXG5cclxuICAgIC8vIExlZ2VuZCBDb250cm9sXHJcbiAgICBjb25zdCBjTGVnZW5kID0gbmV3IENvbnRyb2xMZWdlbmQoKTtcclxuICAgIGNMZWdlbmQudXBkYXRlTGVnZW5kKG1vZGVBbGwuZ2V0TGVnZW5kSXRlbXMoKSk7XHJcbiAgICBuYm5UZWNoTWFwLmFkZENvbnRyb2woJ2xlZ2VuZCcsIGNMZWdlbmQpO1xyXG5cclxuICAgIC8vIFNlYXJjaCBDb250cm9sXHJcblxyXG4gICAgLy8gUHJvZ3Jlc3MgQ29udHJvbFxyXG5cclxuICAgIC8vIEFkZCBldmVudCBMaXN0ZW5lcnNcclxuICAgIGNEaXNwbGF5TW9kZS5vbignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGUuc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYWxsJzpcclxuICAgICAgICAgICAgICAgIG5iblRlY2hNYXAuc2V0TW9kZUhhbmRsZXIobW9kZUFsbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndXBncmFkZSc6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZWUnOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn0pIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTQzOiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtcIl0gPSBzZWxmW1wid2VicGFja0NodW5rXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs2NTddLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXygzMzYpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJmZXRjaFBhZ2UiLCJib3VuZHMiLCJwYWdlIiwicHJvY2VlZCIsIm5vcnRoIiwiZ2V0Tm9ydGgiLCJ0b0ZpeGVkIiwiZWFzdCIsImdldEVhc3QiLCJzb3V0aCIsImdldFNvdXRoIiwid2VzdCIsImdldFdlc3QiLCJFcnJvciIsIk1hdGgiLCJtYXgiLCJOdW1iZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZldGNoIiwibWV0aG9kIiwicmVkaXJlY3QiLCJ0aGVuIiwicmVzcG9uc2UiLCJ0ZXh0IiwicmVzdWx0IiwicGFyc2VkUmVzdWx0IiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsImNhdGNoIiwibWFwIiwiZGF0YXN0b3JlIiwibW9kZUhhbmRsZXIiLCJwb2ludHMiLCJ0aGlzIiwibWFya2VycyIsIm1heENsdXN0ZXJSYWRpdXMiLCJtYXJrZXJDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlPbk1heFpvb20iLCJkaXNhYmxlQ2x1c3RlcmluZ0F0Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJ6b29tVG9Cb3VuZHNPbkNsaWNrIiwicmVtb3ZlT3V0c2lkZVZpc2libGVCb3VuZHMiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJjaHVua2VkTG9hZGluZyIsImNodW5rSW50ZXJ2YWwiLCJjaHVua0RlbGF5IiwiY2h1bmtQcm9ncmVzcyIsInByb2Nlc3NlZCIsInRvdGFsIiwiZWxhcHNlZCIsImNvbnNvbGUiLCJsb2ciLCJhZGRUbyIsIm9uIiwiZXZlbnQiLCJ0YXJnZXQiLCJnZXRab29tIiwiY2x1c3RlciIsImNvbG9yQXJyYXkiLCJnZXRBbGxDaGlsZE1hcmtlcnMiLCJtYXJrZXIiLCJvcHRpb25zIiwiZmlsbENvbG9yIiwiY29sb3JDb3VudHMiLCJmb3JFYWNoIiwiY29sb3IiLCJjb2xvckFycmF5U29ydGVkIiwiT2JqZWN0Iiwia2V5cyIsInNvcnQiLCJhIiwiYiIsImJhY2tncm91bmQiLCJsYXN0Q29sb3VyUGVyY2VudCIsImluZGV4IiwidGhpc0NvbG91clBlcmNlbnQiLCJsZW5ndGgiLCJyYW5kb21JZCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiaHRtbCIsImdldENoaWxkQ291bnQiLCJjbGFzc05hbWUiLCJ6b29tIiwic2V0TW9kZUhhbmRsZXIiLCJ2YWx1ZXMiLCJsYXllciIsInBvaW50Iiwic2V0U3R5bGUiLCJwb2ludENvbG91ciIsInJlZHJhdyIsImVycm9yIiwiZ2V0TGF5ZXJzIiwicmVmcmVzaENsdXN0ZXJzIiwicmVmcmVzaE1hcmtlcnNJbnNpZGVCb3VuZHMiLCJtRmlsdGVyIiwiZ2V0RnVsbFBvaW50c1dpdGhpbkJvdW5kcyIsImxhdExuZ1N0cmluZyIsImxhdGxuZyIsInJlbmRlclBvaW50IiwiZmlsdGVyZWRQb2ludHMiLCJmaWx0ZXIiLCJzaG93UG9pbnQiLCJwbGFjZXMiLCJwdXNoIiwicmVtb3ZlTGF5ZXJzIiwiYWRkTGF5ZXJzIiwicCIsInJlbW92ZU1hcmtlcnNPdXRzaWRlQm91bmRzIiwicmVtb3ZlQWxsTWFya2VycyIsImNsZWFyTGF5ZXJzIiwiY2lyY2xlTWFya2VyTGF5ZXIiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInJhZGl1cyIsIndlaWdodCIsIm9wYWNpdHkiLCJmaWxsT3BhY2l0eSIsImJpbmRQb3B1cCIsInJlbmRlclBvcHVwIiwiYXV0b1BhbiIsImF1dG9DbG9zZSIsImJpbmRUb29sdGlwIiwicmVuZGVyVG9vbHRpcCIsInJlbmRlclBvcHVwQ29udGVudCIsInJlbmRvclBvcHVwTXVsdGkiLCJncm91cERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBsYWNlQ29udGFpbmVycyIsImFkZHJlc3MxIiwicGxhY2UiLCJwbGFjZUNvbnRhaW5lciIsInBsYWNlQ29sb3VyIiwiYnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwidHlwZSIsImlubmVySFRNTCIsInBhbmVsIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiY3VycmVudGx5QWN0aXZlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJpc0RlYnVnTW9kZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImluY2x1ZGVzIiwicm91bmRCb3VuZHMiLCJjZWlsIiwiZmxvb3IiLCJtYXJrZXJGaWx0ZXIiLCJjb250cm9scyIsIk5iblRlY2hNYXAiLCJERUZBVUxUX09QVElPTlMiLCJhcGkiLCJkZWZhdWx0TW9kZUhhbmRsZXIiLCJtYXBDb250YWluZXJJZCIsInByZWZlckNhbnZhcyIsIm1hcmtlckxheWVyIiwibWFwVGlsZUxheWVyIiwiYXR0cmlidXRpb24iLCJzdWJkb21haW5zIiwiY3Jvc3NPcmlnaW4iLCJtYXhab29tIiwic3RhcnRQb3MiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0VmlldyIsImxhdCIsImxuZyIsImNlbnRlciIsImdldENlbnRlciIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJmZXRjaERhdGFGb3JDdXJyZW50VmlldyIsImdldEJveGVzSW5Cb3VuZHMiLCJub3J0aG1vc3QiLCJ3ZXN0bW1vc3QiLCJib3hlcyIsImJveCIsImdldEN1cnJlbnRWaWV3Qm94ZXMiLCJnZXRCb3VuZHMiLCJoaWRlTWFya2Vyc091dHNpZGVDdXJyZW50VmlldyIsIm1hcEJvdW5kcyIsInBhZCIsImRpc3BsYXlNYXJrZXJzSW5DdXJyZW50VmlldyIsImF0dGVtcHQiLCJpc1JlYWR5Iiwid2FybiIsInNldFRpbWVvdXQiLCJyZWZyZXNoUG9pbnRzRnJvbVN0b3JlIiwiZmV0Y2hQcm9taXNlcyIsImZldGNoRGF0YSIsImFsbCIsImludGVyc2VjdHMiLCJwcm9jZXNzRmV0Y2hSZXN1bHQiLCJuZXh0IiwibWVzc2FnZSIsInByb2Nlc3NQcm9taXNlIiwic3RvcmVQbGFjZXMiLCJhZGRDb250cm9sIiwia2V5IiwiY29udHJvbCIsImdldENvbnRyb2wiLCJzZXRNYXJrZXJGaWx0ZXIiLCJldmVudEhhbmRsZXJzIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJlbWl0IiwiZGVidWciLCJoYW5kbGVycyIsIm5hbWUiLCJzdGF0ZSIsImdldFN0YXRlIiwiZGlzcGxheU1vZGUiLCJlbENvbnRyb2xEaXYiLCJlbERyb3Bkb3duIiwiYWxsTGFiZWwiLCJhbGxSYWRpbyIsImFsbFRleHQiLCJ1cGdyYWRlTGFiZWwiLCJ1cGdyYWRlUmFkaW8iLCJ1cGdyYWRlVGV4dCIsImVlTGFiZWwiLCJlZVJhZGlvIiwiZWVUZXh0IiwiZ2VuZXJhdGVDb250cm9sRGl2Iiwib25BZGQiLCJnZW5lcmF0ZURyb3Bkb3duIiwiY2hhbmdlTW9kZSIsIm1vZGUiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJkcm9wZG93biIsImFsbE9wdGlvbiIsInZhbHVlIiwiaW5uZXJUZXh0IiwiZSIsImxhdExuZ0luZGV4IiwibmJuUGxhY2VTdG9yZSIsInN0b3JlUGxhY2UiLCJsYXRMbmciLCJsb2NpZCIsImdldFBsYWNlIiwiZ2V0UGxhY2VzIiwiZ2V0UG9pbnRzIiwic3BsaXQiLCJsb2NpZHMiLCJnZXRQb2ludHNXaXRoaW5Cb3VuZHMiLCJpc0xhdExuZ1dpdGhpbkJvdW5kcyIsImdldFBsYWNlc0F0TGF0TG5nIiwiZ2V0VGVjaENvbG91ciIsInRlY2hUeXBlIiwiaXNQbGFjZUZUVFAiLCJhbHRSZWFzb25Db2RlIiwibWF0Y2giLCJ0ZWNoQ2hhbmdlU3RhdHVzIiwiaXNQbGFjZUZUVFBBdmFpbCIsImlzUGxhY2VGVFRQU29vbiIsImlzUGxhY2VGVFRQRmFyIiwicmVhc29uQ29kZSIsImlzUGxhY2VGVFRDIiwiaXNGd3RvRlRUQyIsImlzRnd0b0ZUVE4iLCJpc1NhdFRvRlciLCJjb250ZW50IiwiY3JlYXRlIiwiYWRkcmVzczIiLCJwcm9ncmFtVHlwZSIsInRhcmdldEVsaWdpYmlsaXR5UXVhcnRlciIsImVlIiwiY2JkcHJpY2luZyIsInplcm9CdWlsZENvc3QiLCJociIsInByZSIsImxhYmVsIiwiZ2V0TGVnZW5kSXRlbXMiLCJjb2xvdXIiLCJzZXRQb3NpdGlvbiIsInVwZGF0ZUxlZ2VuZCIsIml0ZW1zIiwiaXRlbSIsImNvdW50IiwiZm4iLCJtYXBBcGkiLCJNZW1vcnlEYXRhc3RvcmUiLCJtb2RlQWxsIiwibmJuVGVjaE1hcCIsImNEaXNwbGF5TW9kZSIsImNMZWdlbmQiLCJyZWFkeVN0YXRlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsImNodW5rSWRzIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwiZXZlcnkiLCJzcGxpY2UiLCJyIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInNvbWUiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiYmluZCIsIm5jIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=